CQ/Q = FROMDATE;
CY/Y = FROMDATE;
NY/I2 = CY + 1;
PY/I2 = CY - 1;
CM/M  = FROMDATE;
FM/M = &&ROLLFY;
DM/I2 = CM - FM;

FTRAN/A6 = IF FM EQ 01 THEN 'Q' | EDIT(CQ) | ' ' | EDIT(CY)
  ELSE IF (DM GE 9 OR (DM GE -3 AND DM LE -1)) AND FM GE 4 THEN 'Q4' | EDIT(PY) | EDIT(CY)
  ELSE IF DM GE 9 OR (DM GE -3 AND DM LE -1) THEN 'Q4' | EDIT(CY) | EDIT(NY)

  ELSE IF (DM GE 6 OR (DM GE -6 AND DM LE -4)) AND FM GE 7 THEN 'Q3' | EDIT(PY) | EDIT(CY)
  ELSE IF (DM GE 6 OR (DM GE -6 AND DM LE -4)) AND FM GT 4 THEN 'Q3' | EDIT(CY) | EDIT(NY)
  ELSE IF (DM GE 6 OR (DM GE -6 AND DM LE -4)) AND FM LE 4 THEN 'Q3 ' | EDIT(CY)

  ELSE IF DM GE 3 AND FM GT 7 THEN 'Q2' | EDIT(CY) | EDIT(NY)
  ELSE IF DM GE 3 AND FM LE 7 THEN 'Q2' | ' ' | EDIT(CY)
  ELSE IF (DM GE 3 OR (DM GE -9 AND DM LE -7))  THEN 'Q2' | EDIT(PY) | EDIT(CY)

  ELSE IF DM LE 0 AND FM GE 11 THEN 'Q1' | EDIT(CY) | EDIT(NY)
  ELSE IF DM GE 0 THEN 'Q1' | ' ' | EDIT(CY);      
  
THEYR/I1 = IF (FROMDATE GE '&&FROMDT.EVAL') AND (FROMDATE LE '&&TODT.EVAL') THEN 2
  ELSE IF (FROMDATE GE '&&FXDATE.EVAL') AND (FROMDATE LE '&&TXDATE.EVAL') THEN 1;

TRAN/A7 = IF THEYR EQ 1 THEN ' ' | FTRAN ELSE FTRAN;
  
Y1DATE/YYMD='&&FXDATE.EVAL';
Y2DATE/YYMD='&&FROMDT.EVAL';
Y3DATE/YYMD = DATEADD(Y2DATE, 'Y', 1);
Y1/Y=Y1DATE;
Y2/Y=Y2DATE;
Y3/Y = Y3DATE;
TRANYR/YY= FROMDATE;
AYEAR/A4YY = TRANYR;
YEAR/A4 = IF FM EQ 01 THEN AYEAR 
  ELSE IF THEYR EQ 1 THEN EDIT(Y1) | EDIT(Y2) 
  ELSE EDIT(Y2) | EDIT(Y3);