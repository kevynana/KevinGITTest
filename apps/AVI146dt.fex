 
-*06/06/17 - JEM - S-19164 Created for new report ABPFSSM
-* 09/18/2017 RSB S-38044 Place the footer datetime stamp text in a separate file to be -INCLUDED in the stylesheets

-INCLUDE SETECHO
SET ASNAMES=ON
-RUN


TABLE FILE &&RPT_HOLD
SUM FARE_PAID AS 'TFARE'
    NET_TKT_CNT AS 'TTKT'
    FEE_AMOUNT AS 'TPFSA'  
    FEE_CNT AS 'TPFSC'
BY LEVEL_DESC
BY XPSNGR_NM
BY TKT_SORT
BY TRN_DATE
ON TABLE HOLD AS AIRHOLD1
END
-RUN


TABLE FILE &&RPT_HOLD
PRINT AIRLINE   
  ARR_TIME
  ATPCO_CODE
  CC_NUM
  CLASS_CAT 
  DPT_TIME  
  EMBARK
  EMB_APT_CD
  EMB_APT_NM
  FARE_PAID 
  FEE_AMOUNT
  FEE_CNT
  FLIGHT
  FS_DESCRIPTION
  LEVEL_DESC    
  EMP_ID    
  LEVEL1
  LEVEL2    
  LEVEL3 
  LEVEL4
  LEVEL5
  LEVEL6
  LEVEL7
  NET_TKT_CNT   
  NEW_ADV_PURCH 
  PASSNGR_NAME 
  REFUSE_CODE    
  ROUTE
  RTE_APT_NM
  TKT_NUM   
  TKT_TYPE  
  TRN_DATE
  XDPT_DT   
  XTRAN_DT
BY LEVEL_DESC
BY XPSNGR_NM
BY TKT_SORT
BY TRN_DATE
BY SEG_NBR
ON TABLE HOLD AS XTWO
END
-RUN


MATCH FILE XTWO
PRINT AIRLINE   
  ARR_TIME
  ATPCO_CODE
  CC_NUM
  CLASS_CAT 
  DPT_TIME  
  EMBARK
  EMB_APT_CD
  EMB_APT_NM
  FARE_PAID 
  FEE_AMOUNT
  FEE_CNT
  FLIGHT
  FS_DESCRIPTION
  LEVEL_DESC    
  EMP_ID    
  LEVEL1
  LEVEL2    
  LEVEL3 
  LEVEL4
  LEVEL5
  LEVEL6
  LEVEL7
  NET_TKT_CNT   
  NEW_ADV_PURCH 
  PASSNGR_NAME 
  REFUSE_CODE   
  ROUTE
  RTE_APT_NM
  TKT_NUM   
  TKT_TYPE  
  TRN_DATE
  XDPT_DT   
  XTRAN_DT
BY LEVEL_DESC
BY XPSNGR_NM
BY TKT_SORT
BY TRN_DATE
BY SEG_NBR
ON TABLE HOLD
RUN
FILE AIRHOLD1
PRINT TFARE
      TTKT
      TPFSA
      TPFSC
BY LEVEL_DESC
BY XPSNGR_NM
BY TKT_SORT
BY TRN_DATE
AFTER MATCH HOLD AS AIRHOLD2 OLD-OR-NEW
END
-RUN


TABLE FILE AIRHOLD2
PRINT AIRLINE   
  ARR_TIME
  ATPCO_CODE
  CC_NUM
  CLASS_CAT 
  DPT_TIME  
  EMBARK
  EMB_APT_CD
  EMB_APT_NM
  FARE_PAID 
  FEE_AMOUNT
  FEE_CNT
  FLIGHT
  FS_DESCRIPTION
  LEVEL_DESC    
  EMP_ID    
  LEVEL1
  LEVEL2    
  LEVEL3 
  LEVEL4
  LEVEL5
  LEVEL6
  LEVEL7
  NET_TKT_CNT   
  NEW_ADV_PURCH 
  PASSNGR_NAME 
  REFUSE_CODE   
  ROUTE
  RTE_APT_NM 
  SEG_NBR
  TFARE
  TKT_NUM   
  TKT_SORT
  TKT_TYPE  
  TRN_DATE
  TPFSA
  TPFSC
  TTKT 
  XDPT_DT   
  XPSNGR_NM
  XTRAN_DT
BY TKT_SORT
BY SEG_NBR
ON TABLE HOLD AS AIRHOLD3
END



DEFINE FILE AIRHOLD3
-INCLUDE STDTIME
ATP_DESC/A65 = ATPCO_CODE|'-'|FS_DESCRIPTION;

RREFUSE_CODE/A2 = IF TKT_SORT NE LAST TKT_SORT THEN REFUSE_CODE ELSE ' ';

TICKET_NMBR/A10 = IF TKT_NUM NE LAST TKT_NUM THEN TKT_NUM ELSE ' ';

XT_DTE/A8 = EDIT(TRN_DATE);
XTKT_SRT/A10 = EDIT(TKT_SORT,'9999999999$');

-* ****DEFINES ON PREVIOUS DEFINES****
SRT_DT/A120 = TKT_SORT||XT_DTE||LEVEL_DESC||XPSNGR_NM;

FARE_AMT/D12.2CS = IF SRT_DT NE LAST SRT_DT THEN TFARE ELSE 0;
PFS_AMT/D12.2CS = IF SRT_DT NE LAST SRT_DT THEN TPFSA ELSE 0;
TTL_AMT/D12.2CS = FARE_AMT + PFS_AMT;

-*
-************** 04/01/16-RSB-S-17122 
 RADV_PURCHX/I7CS = IF (EMB_APT_CD EQ 'FP2' OR 'EX1' OR 'RF1' OR 'EX5') THEN 0
  ELSE IF (TKT_TYPE EQ 'P-RF' OR 'P-EX') THEN 0
  ELSE IF (SEG_NBR EQ '00') THEN 0
  ELSE IF (TKT_SORT NE LAST TKT_SORT) AND (FARE_AMT GE 0) THEN NEW_ADV_PURCH
  ELSE IF (TKT_SORT NE LAST TKT_SORT) AND (FARE_AMT LT 0) 
  THEN NEW_ADV_PURCH * (-1) ELSE 0;
 RADV_PURCHY/A7 = EDIT(RADV_PURCHX) ;
 RADV_PURCHZ/A7 = TRIM('L', RADV_PURCHY, 7, '0', 1, RADV_PURCHZ);
 RADV_PURCHA/A8 = IF RADV_PURCHX LT 0 THEN '-' || RADV_PURCHZ ELSE RADV_PURCHZ ;
 RADV_PURCH /A8 = RJUST(8, RADV_PURCHA, RADV_PURCH);

NOWTOD/A8 WITH TKT_SORT = HHMMSS (NOWTOD);
END
-RUN
 

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_DRIL;
-************************************************************
-* INCLUDE PROGRAM TO GEN WHERE STATEMENTS
-************************************************************
-SET &&DRILLRPT = 'AIRHOLD3';
-INCLUDE DRILWHRS
-SKIP_DRIL
-************************************************************


-SET &&PAHDR  = IF '&&OUTFMT.EVAL' EQ 'PDF' OR 'PPT' OR 'COM' THEN 'HEADAIR' ELSE 'HDREXLS'; 
-SET &&PASTYD = IF '&&OUTFMT.EVAL' NE 'PDF' OR 'PPT' OR 'COM' THEN 'DTEXL' ELSE &&DTSTY;
-RUN

-IF '&&SETF.EVAL' EQ 'ABBTALS1' GOTO Abbtals1;

TABLE FILE AIRHOLD3
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPC;
"</2"
-NOSPC;
-*
-**********************************************************************
-* Print statement with fields passed from the user profile database
-**********************************************************************
-*
&&PRINT1
&&PRINT2
&&PRINT3
&&PRINT4
&&PRINT5
&&PRINT6
&&PRINT7
&&PRINT8
&&PRINT9
&&PRINT10

-*
-**********************************************************************
-* By statements (one per field)
-**********************************************************************
-*
-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTBREAK;
-IF &&SETF EQ 'KOEXSUM' GOTO :NOMULTBREAK;
-INCLUDE LevelNOPRINT
-*-GOTO SKIP1STBY;
-:NOMULTBREAK
&&BY1
-SKIP1STBY
&&BY2
&&BY3
&&BY4
&&BY5
&&BY6
&&BY7
&&BY8
&&BY9
&&BY10
-IF &&OUTFMT NE 'PDF' GOTO NOXTS;
BY XTS_FLAG NOPRINT
-NOXTS;
-*
-*********************************************************************
-*DATE           NAME               DESCRIPTION 
-*8/18/00      IBISTL-KR            INCLUDE WHERE STATEMENTS WHEN
-*                                  DRILLED_RUN EQ 'Y'.
-*********************************************************************
-*
-**********************************************************************
-* Where statements for Drilled Report
-**********************************************************************
-*
-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_WHR;
-INCLUDE &&DRILLWHR
-SKIP_WHR
-*
-**********************************************************************
-* On Table statements for code appropriate to On Table commands
-**********************************************************************
-*
-IF &&SETF EQ 'KOEXSUM' GOTO :NOMULTOTAL;
-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTOTAL;

-INCLUDE TOTALBYHIERARCHY
-GOTO SKIPBREAKOPT;
-:NOMULTOTAL;
-IF &&SETF EQ 'KOEXSUM' OR 'BZLSAVE' OR 'BNBTALST' OR 'LWLSAVD' GOTO :NOBO;
&&BREAKOPTION
-:NOBO;
&&ONTABLE1
&&ONTABLE2
-GOTO SKIPBREAKOPT;
&&ONTABLE1
&&ONTABLE2
-SKIPBREAKOPT
&&ONTABLE3
&&ONTABLE4
&&ONTABLE5
&&ONTABLE6
&&ONTABLE7
&&ONTABLE8
&&ONTABLE9
&&ONTABLE10
-*


-**********************************************************************
-* Report specific footer(s)
-**********************************************************************
-*

 


-INCLUDE FOOTERDT
-*

-*ON TABLE SET STYLE &&DTSTY
-**************************************************************************
-*DATE           NAME               DESCRIPTION OF CHANGE
-*----           ----               ---------------------
-*8/11/00      IBISTL-SB            CHANGED THE SET STYLE STATEMENT 
-*                                  WITH AN INCLUDE
-**************************************************************************
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET STYLE *
-INCLUDE &&PASTYD

ENDSTYLE
-*
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-GOTO XXIT;

-Abiddtl;
 

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_DRILID;
-************************************************************
-* INCLUDE PROGRAM TO GEN WHERE STATEMENTS
-************************************************************
-SET &&DRILLRPT = 'AIRHOLD3';
-INCLUDE DRILWHRS
-SKIP_DRILID
-************************************************************


-SET &&PAHDR = IF '&&OUTFMT.EVAL' EQ 'PDF' OR 'PPT' OR 'COM' THEN 'HEADAIR' ELSE 'HDREXLS'; 
-SET &&PASTYD = IF '&&OUTFMT.EVAL' NE 'PDF' OR 'PPT' OR 'COM' THEN 'DTEXL' ELSE &&DTSTY;
-RUN


TABLE FILE AIRHOLD3
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPCID;
"</2"
-NOSPCID;
PRINT
 TICKET_NMBR AS 'TKT,NMBR'
 XDPT_DT AS 'DEPART,DATE' 
 TIME_DPT AS 'TIME'
 EMB_APT_NM AS 'ORG'  
 RTE_APT_NM AS 'DST'
 AIRLINE AS 'CR'
 FARE_AMT AS 'FARE,PAID'
 NET_TKT_CNT AS 'TKT,CNT'
 RREFUSE_CODE AS 'RSN,CDE'
-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTBREAKID;
-INCLUDE LevelNOPRINT
-:NOMULTBREAKID;
BY LEVEL_DESC NOPRINT
BY EMP_ID &EMPID
BY LEVEL1 &LV1
BY LEVEL2 &LV2
BY LEVEL3 &LV3
BY XPSNGR_NM AS 'PASSENGER,NAME'
BY XTKT_SRT NOPRINT 
BY TKT_SORT NOPRINT 
BY TRN_DATE NOPRINT
BY XDPT_DT NOPRINT  
BY DPT_TIME NOPRINT
BY SEG_NBR NOPRINT
BY TKT_TYPE AS 'TKT,TYPE'

-IF &&OUTFMT NE 'PDF' GOTO NOXTSID;
BY XTS_FLAG NOPRINT
-NOXTSID;

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_WHRID;
-INCLUDE &&DRILLWHR
-SKIP_WHRID


-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTOTALID;

-INCLUDE TOTALBYHIERARCHY
-GOTO SKIPBREAKOPTID;
-:NOMULTOTALID;
&&BREAKOPTION
-SKIPBREAKOPTID;

ON TABLE COLUMN-TOTAL
ON XTKT_SRT SKIP-LINE


-**********************************************************************
-* Report specific footer(s)
-**********************************************************************
-*

 


-INCLUDE FOOTERDT
-*

-*ON TABLE SET STYLE &&DTSTY
-**************************************************************************
-*DATE           NAME               DESCRIPTION OF CHANGE
-*----           ----               ---------------------
-*8/11/00      IBISTL-SB            CHANGED THE SET STYLE STATEMENT 
-*                                  WITH AN INCLUDE
-**************************************************************************
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET STYLE *
-INCLUDE &&PASTYD

ENDSTYLE
-*
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-GOTO XXIT;

-********
-ABBDFAIR
-********
-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_DRILID;
-************************************************************
-* INCLUDE PROGRAM TO GEN WHERE STATEMENTS
-************************************************************
-SET &&DRILLRPT = 'AIRHOLD3';
-INCLUDE DRILWHRS
-***********
-SKIP_DRILID
-************************************************************

-SET &&PAHDR  = IF '&&OUTFMT.EVAL' EQ 'PDF' OR 'PPT' OR 'COM' THEN 'HEADAIR' ELSE 'HDREXLS'; 
-SET &&PASTYD = IF '&&OUTFMT.EVAL' NE 'PDF' OR 'PPT' OR 'COM' THEN 'DTEXL'   ELSE &&DTSTY;
-RUN

DEFINE FILE AIRHOLD3 ADD
 PAMT/D9.2 = IF (EXCHG_SALE NE ' ') OR (TKT_TYPE CONTAINS 'RF') THEN PENALTY_AMT ELSE 0;
 EXVIP_FLAG/A1 = IF EXEC EQ 'E' THEN 'E' ELSE
                 IF VIP_FLAG EQ 'V' THEN 'V' ELSE ' ';
END
-*
TABLE FILE AIRHOLD3
-*
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPCID;
"</2"
-*
-********
-NOSPCID;
-********
SUM FARE_PAID AS 'Fare Paid'
    MAX.PAMT  AS 'Penalty Amt'
    LEVEL1     
    LEVEL2     
    LEVEL3     
    LEVEL4     
    LEVEL5     
    LEVEL6     
    LEVEL7    
-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTBREAKID;
-INCLUDE LevelNOPRINT
-*
-***************
-:NOMULTBREAKID;
-***************
BY LEVEL_DESC       NOPRINT
BY EMP_ID           &EMPID
BY PASSNGR_NAME     AS 'Passenger Name'
BY BR_CL_IDX        AS 'Client,Number'
BY IBOOK            AS 'Online/,Traditional,Booking'
BY PNR_LOCATOR      AS 'PNR,Locator'
BY BOOK_DT          AS 'Booked,Date'
BY XTRAN_DT         AS 'Transaction,Date'
BY TKT_NUM          AS 'Ticket,Number'
BY TKT_TYPE         AS 'Ticket,Type'
BY DOC_NUMBER       AS 'Document,Number'
BY VOID_MDY         AS 'Void,Date'
BY INTL_DOM         AS 'Ticket,Int/Dom Flag'
BY VAL_AIRLINE      AS 'Validating,Airline'
BY EXVIP_FLAG       AS 'Executive/,VIP Flag'
BY REFUSE_CODE      AS 'Reason,Code'
BY FNL_DEST_AIRPORT AS 'Final,Airport'
BY C_ITIN           AS 'Itinerary'
BY XFST_DPT         AS 'First,Depart,Date'
BY TKT_RET_DATE     AS 'Ticket Final,Return Date'
-*
-IF &&OUTFMT NE 'PDF' GOTO NOXTSID;
BY XTS_FLAG NOPRINT
-*
-***************
-NOXTSID;
-***************
-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_WHRID;
-INCLUDE &&DRILLWHR
-*
-***************
-SKIP_WHRID
-***************

-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTOTALID;

-INCLUDE TOTALBYHIERARCHY
-GOTO SKIPBREAKOPTID;
-*
-***************
-:NOMULTOTALID;
-***************
&&BREAKOPTION
-IF &&OUTFMT NE 'EXL2K' THEN GOTO NO_REPEATS;
ON TABLE SET BYDISPLAY ON
-***********
-NO_REPEATS
-***********
ON TABLE COLUMN-TOTAL
-*
-**********************************************************************
-* Report specific footer(s)
-**********************************************************************
-*
-INCLUDE FOOTERDT
-*
-**************************************************************************
-*DATE           NAME               DESCRIPTION OF CHANGE
-*----           ----               ---------------------
-*8/11/00      IBISTL-SB            CHANGED THE SET STYLE STATEMENT 
-*                                  WITH AN INCLUDE
-**************************************************************************
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET STYLE *
-INCLUDE &&PASTYD

ENDSTYLE
-*
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-GOTO XXIT;


-Prairdlv;

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_DRILID;
-************************************************************
-* INCLUDE PROGRAM TO GEN WHERE STATEMENTS
-************************************************************
-SET &&DRILLRPT = 'AIRHOLD3';
-INCLUDE DRILWHRS
-SKIP_DRILID
-************************************************************


-SET &&PAHDR = IF '&&OUTFMT.EVAL' EQ 'PDF' OR 'PPT' OR 'COM' THEN 'HEADAIR' ELSE 'HDREXLS'; 
-SET &&PASTYD = IF '&&OUTFMT.EVAL' NE 'PDF' OR 'PPT' OR 'COM' THEN 'DTEXL' ELSE &&DTSTY;
-RUN


TABLE FILE AIRHOLD3
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPCID;
"</2"
-NOSPCID;
PRINT TICKET_NMBR AS 'TKT,NUM'
RREFUSE_CODE AS 'RSN,CDE' RADV_PURCH AS 'ADV,PUR'
XDPT_DT AS 'DEPART, DATE'
TIME_DPT AS 'TIME' EMB_APT_NM AS 'ORG'  RTE_APT_NM AS 'DST'
AIRLINE AS 'CR' FLIGHT AS 'FLT,NBR' 
CLASS_CAT AS 'CLASS,CATEGORY'  FARE_AMT AS  'FARE,PAID' 
NET_TKT_CNT AS 'TKT,CNT'

BY LEVEL_DESC NOPRINT BY XPSNGR_NM AS 'PASSENGER,NAME'
BY EMP_ID &EMPID
BY LEVEL1 &LV1
BY LEVEL2 &LV2
BY LEVEL3 &LV3
BY XTKT_SRT NOPRINT 
BY TKT_SORT NOPRINT BY TRN_DATE NOPRINT
BY XDPT_DT NOPRINT  BY DPT_TIME NOPRINT
BY SEG_NBR NOPRINT
BY TKT_TYPE AS 'TKT,TYPE'
BY XTRAN_DT AS 'TRN,DTE'
-IF &&OUTFMT NE 'PDF' GOTO NOXTSID;
BY XTS_FLAG NOPRINT
-NOXTSID;
ON LEVEL_DESC RECOMPUTE FARE_AMT NET_TKT_CNT AS 'TOTAL FOR'
ON XPSNGR_NM RECOMPUTE MULTILINES FARE_AMT NET_TKT_CNT
AS 'TOTAL FOR'
ON XTKT_SRT SKIP-LINE
 

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_WHRID;
-INCLUDE &&DRILLWHR
-SKIP_WHRID


-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTOTALID;

-INCLUDE TOTALBYHIERARCHY
-GOTO SKIPBREAKOPTID;
-:NOMULTOTALID;
&&BREAKOPTION
ON TABLE COLUMN-TOTAL
ON XTKT_SRT SKIP-LINE


-**********************************************************************
-* Report specific footer(s)
-**********************************************************************
-*

 


-INCLUDE FOOTERDT
-*

-*ON TABLE SET STYLE &&DTSTY
-**************************************************************************
-*DATE           NAME               DESCRIPTION OF CHANGE
-*----           ----               ---------------------
-*8/11/00      IBISTL-SB            CHANGED THE SET STYLE STATEMENT 
-*                                  WITH AN INCLUDE
-**************************************************************************
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET STYLE *
-INCLUDE &&PASTYD

ENDSTYLE
-*
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-GOTO XXIT;

-Abbtals1;
TABLE FILE AIRHOLD3
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPC;
"</2"
-NOSPC;
PRINT XDPT_DT AS 'DEPART,DATE' 
EMB_CTY_NM AS 'ORG' 

RTE_CTY_NM AS 'DST' 
AIRLINE AS 'CR'
SEG_AMT AS ' NET,FARE'
SEG_TAX AS 'TAXES'
FARE_AMT AS 'TOTAL,FARE PAID'
NET_TKT_CNT AS 'TKT,CNT'

BY LEVEL_DESC NOPRINT BY CC_NUM NOPRINT
BY XTRAN_DT AS 'TRAN,DATE' 
BY XPSNGR_NM AS 'PASSENGER,NAME' 
BY EMP_ID &EMPID
BY LEVEL1 &LV1
BY LEVEL2 &LV2
BY LEVEL3 &LV3
BY XTKT_SRT NOPRINT BY TKT_SORT NOPRINT BY SEG_NBR NOPRINT
BY TRN_DATE NOPRINT BY XDPT_DT NOPRINT  BY DPT_TIME NOPRINT
BY TICKET_NMBR AS 'TICKET,NUMBER'
BY TKT_TYPE AS 'TKT,TYPE'

BY XTS_FLAG NOPRINT
-NOXTSID;
ON CC_NUM PAGE-BREAK
ON CC_NUM SUMMARIZE AS 'TOTAL FOR'
ON XTKT_SRT SKIP-LINE
ON TABLE NOTOTAL
 

-IF &&DRILLED_RUN EQ 'N' GOTO SKIP_WHRID;
-INCLUDE &&DRILLWHR
-SKIP_WHRID


-IF &&MULTIBREAK NE 'Y' OR &&ALTHIER NE 'Y' THEN GOTO :NOMULTOTALID;

-INCLUDE TOTALBYHIERARCHY
-GOTO SKIPBREAKOPTID;
-:NOMULTOTALID;
&&BREAKOPTION
ON TABLE COLUMN-TOTAL
ON XTKT_SRT SKIP-LINE


-**********************************************************************
-* Report specific footer(s)
-**********************************************************************
-*
-INCLUDE FOOTERDT
-*
-*ON TABLE SET STYLE &&DTSTY
-**************************************************************************
-*DATE           NAME               DESCRIPTION OF CHANGE
-*----           ----               ---------------------
-*8/11/00      IBISTL-SB            CHANGED THE SET STYLE STATEMENT 
-*                                  WITH AN INCLUDE
-**************************************************************************
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET STYLE *
-INCLUDE &&PASTYD

ENDSTYLE
-*
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-GOTO XXIT;

-XXIT;
