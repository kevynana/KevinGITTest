-***************************************************************************
-* File:      GetBDBsForDrill.fex
-* Functions: This program is used to copy the temporary files B databases for
-*            drilldown reports into edatemp directory.
-* Date:      02/28/2008
-*  02/05/2015  REJ  S-05681 Changes for Available Reports.  Adding code so that the
-*                           program will run in current Review and in Available Reports.
-*  06/26/2015  REJ  S-08389 Latest changes for ER5 Available Reports.
-*  08/04/2015  REJ  S-10079 Latest changes for ER5 Available Reports.
-****************************************************************************
-INCLUDE SETECHO
 
-IF &&DRILLED_RUN NE 'Y' THEN GOTO XXXIT;
 
-SET &BRPT_QUE = &&WEBPATH || &&FIPARM || 'BRPT_QUE.FOC';
-SET &BRPTINST = &&WEBPATH || &&FIPARM || 'BRPTINST.FOC';
-SET &BRPT_SET = &&WEBPATH || &&FIPARM || 'BRPT_SET.FOC';
-SET &BROLLUP  = &&WEBPATH || &&FIPARM || 'BROLLUP.FOC';
-SET &BRPT_QUE2 = &&WEB_PATH || 'BRPT_QUE.FOC';
-SET &BRPTINST2 = &&WEB_PATH || 'BRPTINST.FOC';
-SET &BRPT_SET2 = &&WEB_PATH || 'BRPT_SET.FOC';
-SET &BROLLUP2  = &&WEB_PATH || 'BROLLUP.FOC';


-IF &&FROMAVRP EQ '' GOTO :GAVRP1;
-SET &BRPT_FLDS_HIERARCHY = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_HIERARCHY.FOC';
-SET &BRPT_FLDS_MISC = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_MISC.FOC';
-SET &BRPT_FLDS_PARM = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_PARM.FOC';
-SET &BRPT_FLDS_PARM_VALUES = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_PARM_VALUES.FOC';
-SET &BRPT_FLDS_UDID = &&WEBPATH || &&FIPARM || 'BRPT_FLDS_UDID.FOC';
-SET &BRPT_FLDS_TRVLSMRY = &&WEBPATH || &&FIPARM || 'BRPT_FLDS_TRVLSMRY.FOC';
-SET &BRPT_FLDS_DVR = &&WEBPATH || &&FIPARM || 'BRPT_FLDS_DVR.FOC';
-SET &BRPT_FLDS_HIDE_OPTIONS = &&WEBPATH || &&FIPARM || 'BRPT_FLDS_HIDE_OPTIONS.FOC';
-SET &BRPT_FLDS_PARM_REQUIRED = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_PARM_REQUIRED.FOC';
-SET &BRPT_FLDS_PARM_VALUES_REQUIRED = &&WEBPATH || &&FIPARM  || 'BRPT_FLDS_PARM_VALUES_REQUIRED.FOC';
 
-SET &BRPT_FLDS_HIERARCHY2 = &&WEB_PATH  || 'BRPT_FLDS_HIERARCHY.FOC';
-SET &BRPT_FLDS_MISC2 = &&WEB_PATH  || 'BRPT_FLDS_MISC.FOC';
-SET &BRPT_FLDS_PARM2 = &&WEB_PATH  || 'BRPT_FLDS_PARM.FOC';
-SET &BRPT_FLDS_PARM_VALUES2 = &&WEB_PATH  || 'BRPT_FLDS_PARM_VALUES.FOC';
-SET &BRPT_FLDS_UDID2 = &&WEB_PATH  || 'BRPT_FLDS_UDID.FOC';
-SET &BRPT_FLDS_TRVLSMRY2 = &&WEB_PATH  || 'BRPT_FLDS_TRVLSMRY.FOC';
-SET &BRPT_FLDS_DVR2 = &&WEB_PATH  || 'BRPT_FLDS_DVR.FOC';
-SET &BRPT_FLDS_HIDE_OPTIONS2 = &&WEB_PATH  || 'BRPT_FLDS_HIDE_OPTIONS.FOC';
-SET &BRPT_FLDS_PARM_REQUIRED2 = &&WEB_PATH  || 'BRPT_FLDS_PARM_REQUIRED.FOC';
-SET &BRPT_FLDS_PARM_VALUES_REQUIRED2 = &&WEB_PATH  || 'BRPT_FLDS_PARM_VALUES_REQUIRED.FOC';
 
-DOS DEL &BRPT_FLDS_HIERARCHY2
-DOS DEL &BRPT_FLDS_MISC2
-DOS DEL &BRPT_FLDS_PARM2
-DOS DEL &BRPT_FLDS_PARM_VALUES2
-DOS DEL &BRPT_FLDS_UDID2
-DOS DEL &BRPT_FLDS_TRVLSMRY2
-DOS DEL &BRPT_FLDS_DVR2
-DOS DEL &BRPT_FLDS_HIDE_OPTIONS2
-DOS DEL &BRPT_FLDS_PARM_REQUIRED2
-DOS DEL &BRPT_FLDS_PARM_VALUES_REQUIRED2
 
 
CREATE FILE BRPT_FLDS_HIERARCHY
CREATE FILE BRPT_FLDS_MISC
CREATE FILE BRPT_FLDS_PARM
CREATE FILE BRPT_FLDS_PARM_VALUES
CREATE FILE BRPT_FLDS_UDID
CREATE FILE BRPT_FLDS_TRVLSMRY
CREATE FILE BRPT_FLDS_DVR
CREATE FILE BRPT_FLDS_HIDE_OPTIONS
CREATE FILE BRPT_FLDS_PARM_REQUIRED
CREATE FILE BRPT_FLDS_PARM_VALUES_REQUIRED
 
-GOTO :GAVRP1_CONT;
 
-:GAVRP1
-SET &BRPTFLDS = &&WEBPATH || &&FIPARM || 'BRPTFLDS.FOC';
-SET &BRPTFLDS2 = &&WEB_PATH || 'BRPTFLDS.FOC';
-DOS DEL &BRPTFLDS2
CREATE FILE BRPTFLDS
-:GAVRP1_CONT 

 
-DOS DEL &BRPT_QUE2
-DOS DEL &BRPTINST2
-DOS DEL &BRPT_SET2
-DOS DEL &BROLLUP2
-RUN
 
-*CREATE FILE BRPT_QUE
CREATE FILE BRPTINST
CREATE FILE BRPT_SET
CREATE FILE BROLLUP
-RUN


-IF &&FROMAVRP EQ '' GOTO :GAVRP2;
STATE &BRPT_FLDS_HIERARCHY
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_HIERARCHY &BRPT_FLDS_HIERARCHY2
-RUN

STATE &BRPT_FLDS_MISC
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_MISC &BRPT_FLDS_MISC2
-RUN

STATE &BRPT_FLDS_PARM
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_PARM &BRPT_FLDS_PARM2
-RUN

STATE &BRPT_FLDS_PARM_VALUES
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_PARM_VALUES &BRPT_FLDS_PARM_VALUES2
-RUN

STATE &BRPT_FLDS_UDID
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_UDID &BRPT_FLDS_UDID2
-RUN

STATE &BRPT_FLDS_TRVLSMRY
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_TRVLSMRY &BRPT_FLDS_TRVLSMRY2
-RUN

STATE &BRPT_FLDS_DVR
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_DVR &BRPT_FLDS_DVR2
-RUN

STATE &BRPT_FLDS_HIDE_OPTIONS
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_HIDE_OPTIONS &BRPT_FLDS_HIDE_OPTIONS2
-RUN
 
STATE &BRPT_FLDS_PARM_REQUIRED
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_PARM_REQUIRED &BRPT_FLDS_PARM_REQUIRED2
-RUN
 
STATE &BRPT_FLDS_PARM_VALUES_REQUIRED
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_FLDS_PARM_VALUES_REQUIRED &BRPT_FLDS_PARM_VALUES_REQUIRED2
-RUN
 
-GOTO :GAVRP2_CONT;
 
 
 
-:GAVRP2
STATE &BRPTFLDS
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPTFLDS &BRPTFLDS2
-RUN
-:GAVRP2_CONT

 
STATE &BRPT_QUE
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_QUE &BRPT_QUE2
-RUN
 
STATE &BRPTINST
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPTINST &BRPTINST2
-RUN
 
STATE &BRPT_SET
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BRPT_SET &BRPT_SET2
-RUN
 
STATE &BROLLUP
-RUN
-IF &RETCODE NE 0 GOTO NODRILL;
COPY &BROLLUP &BROLLUP2
-RUN
 
 
TABLE FILE BRPTINST
PRINT INST_KEY
ON TABLE SAVE
END
-RUN
-IF &&FROMAVRP EQ '' GOTO :GAVRP3;
-READ SAVE &&IKEY.11.
-GOTO :GAVRP3_CONT;
-:GAVRP3
-READ SAVE &&IKEY.7.
-:GAVRP3_CONT

-CLOSE SAVE
 
-GOTO XXXIT;
-NODRILL
 
-HTMLFORM BEGIN
<HTML>
<HEAD></HEAD>
<BODY>
 
<TITLE> TRAVEL & TRANSPORT</TITLE>
<CENTER><H2>THIS FIELD IS NOT DRILLABLE!!!</H2></CENTER>
<CENTER><H4>PLEASE GO BACK TO THE PREVIOUS PAGE USING </H4></CENTER>
<CENTER><H3>BACK BUTTON OF THE BROWSER</H3></CENTER>
</BODY>
</HTML>
 
-HTMLFORM END
-XXXIT