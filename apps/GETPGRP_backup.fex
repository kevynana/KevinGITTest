-**********************************************************************
-* GETPGRP.FEX
-* Retrieve Peer Group selected
-**********************************************************************
-INCLUDE SETECHO
-*Retain the original rollup code (base rollup)
-DEFAULT &PEERTYPE='AIR';
 
-SET &&TOTPEERS = 0;
TABLE FILE BRPTFLDS
-IF &PEERTYPE EQ 'CAR' GOTO CPEER;
-IF &PEERTYPE EQ 'HTL' GOTO HPEER;
-IF &PEERTYPE EQ 'LIM' GOTO LPEER;
PRINT QREVIEW2.PEERMBR
WHERE QREVIEW2.PEERMBR NE ' '
-GOTO CONT_PEER;
 
-CPEER
PRINT QREVIEW2.CPEERMBR
WHERE QREVIEW2.CPEERMBR NE ' '
-GOTO CONT_PEER;
 
-HPEER
PRINT QREVIEW2.HPEERMBR
WHERE QREVIEW2.HPEERMBR NE ' '
-GOTO CONT_PEER;


-LPEER
PRINT QREVIEW2.LPEERMBR
WHERE QREVIEW2.LPEERMBR NE ' '
-GOTO CONT_PEER;

 
-CONT_PEER;
WHERE INST_KEY EQ &&IKEY
ON TABLE SAVE AS PEERMEM2
END
-RUN
 
-SET &&TOTPEERS = &LINES;
-* -IF &LINES EQ 0 THEN GOTO NOPEERGROUP;
-IF &LINES LE 0 THEN GOTO NOPEERGROUP;
-SET &CNT = 1;
 
-REPEAT TOEND2 &LINES TIMES
-READ PEERMEM2 NOCLOSE &PEERM.8.
-SET &&PEERMBR.&CNT = &PEERM;
-SET &CNT = &CNT + 1;
-TOEND2
-CLOSE PEERMEM2
-NOPEERGROUP
