-*move the values from air.incl3 to air.incl11 
-*move the values from DPT_AIRPORT to ORG_APC for 'AVIW19' and TCNONPTM
-INCLUDE SETECHO
-*SET TEMPERASE = OFF
-*move the values from air.incl3 to air.incl11
TABLE FILE RPT_INST
PRINT INST_KEY
WHERE USE_PARM EQ 'AVIW19' OR RPT_STREAM EQ 'TCNONPTM'
ON TABLE SAVE
END
TABLE FILE RPT_FLDS
PRINT SEG AIR.ID 
BY INST_KEY
WHERE INST_KEY IN FILE SAVE
ON TABLE HOLD AS HOLD2
END
-RUN

MAINTAIN FILE RPT_FLDS AND HOLD2
REPOSITION HOLD2.INST_KEY;
FOR ALL NEXT HOLD2.INST_KEY INTO HLDSTK;

INFER RPT_FLDS.INST_KEY AIR.ID INTO RPTSTK;
COMPUTE CNT/I3=1;

REPEAT HLDSTK.FOCCOUNT
	COMPUTE RPTSTK(CNT).INST_KEY = HLDSTK(CNT).INST_KEY;
	COMPUTE RPTSTK(CNT).ID = HLDSTK(CNT).ID;
	COMPUTE RPTSTK(CNT).INCL1 = HLDSTK(CNT).INCL1;
	COMPUTE RPTSTK(CNT).INCL2 = HLDSTK(CNT).INCL2;
	-*COMPUTE RPTSTK(CNT).INCL3 = HLDSTK(CNT).INCL3;
	COMPUTE RPTSTK(CNT).INCL3 = 0;
	COMPUTE RPTSTK(CNT).INCL4 = HLDSTK(CNT).INCL4;
	COMPUTE RPTSTK(CNT).INCL5 = HLDSTK(CNT).INCL5;
	COMPUTE RPTSTK(CNT).INCL6 = HLDSTK(CNT).INCL6;
	COMPUTE RPTSTK(CNT).INCL7 = HLDSTK(CNT).INCL7;
	COMPUTE RPTSTK(CNT).INCL8 = HLDSTK(CNT).INCL8;
	COMPUTE RPTSTK(CNT).INCL9 = HLDSTK(CNT).INCL9;
	COMPUTE RPTSTK(CNT).INCL10 = HLDSTK(CNT).INCL10;
	COMPUTE RPTSTK(CNT).INCL11 = HLDSTK(CNT).INCL3;
	COMPUTE RPTSTK(CNT).INCL12 = HLDSTK(CNT).INCL12;

	COMPUTE RPTSTK(CNT).INTDOMT = HLDSTK(CNT).INTDOMT;
	COMPUTE RPTSTK(CNT).INTDOMS = HLDSTK(CNT).INTDOMS;
	COMPUTE RPTSTK(CNT).RANKBYTOP1 = HLDSTK(CNT).RANKBYTOP1;
	COMPUTE RPTSTK(CNT).RANKMETHOD = HLDSTK(CNT).RANKMETHOD;
	COMPUTE RPTSTK(CNT).CLASSCAT_A = HLDSTK(CNT).CLASSCAT_A;
	COMPUTE RPTSTK(CNT).CLASSCAT_F = HLDSTK(CNT).CLASSCAT_F;
	COMPUTE RPTSTK(CNT).CLASSCAT_B = HLDSTK(CNT).CLASSCAT_B;
	COMPUTE RPTSTK(CNT).CLASSCAT_C = HLDSTK(CNT).CLASSCAT_C;
	COMPUTE RPTSTK(CNT).CLASSCAT_D = HLDSTK(CNT).CLASSCAT_D;
	COMPUTE RPTSTK(CNT).TRANS_TYPE_S = HLDSTK(CNT).TRANS_TYPE_S;
	COMPUTE RPTSTK(CNT).TRANS_TYPE_E = HLDSTK(CNT).TRANS_TYPE_E;
	COMPUTE RPTSTK(CNT).TRANS_TYPE_R = HLDSTK(CNT).TRANS_TYPE_R;
	COMPUTE RPTSTK(CNT).TRANS_TYPE_V = HLDSTK(CNT).TRANS_TYPE_V;

	COMPUTE RPTSTK(CNT).ADV_PUR_A = HLDSTK(CNT).ADV_PUR_A;
	COMPUTE RPTSTK(CNT).ADV_PUR_0 = HLDSTK(CNT).ADV_PUR_0;
	COMPUTE RPTSTK(CNT).ADV_PUR_7 = HLDSTK(CNT).ADV_PUR_7;
	COMPUTE RPTSTK(CNT).ADV_PUR_14 = HLDSTK(CNT).ADV_PUR_14;
	COMPUTE RPTSTK(CNT).ADV_PUR_21 = HLDSTK(CNT).ADV_PUR_21;
	COMPUTE RPTSTK(CNT).RANKBYTOP2 = HLDSTK(CNT).RANKBYTOP2;
	COMPUTE RPTSTK(CNT).CITYPAIRFLD = HLDSTK(CNT).CITYPAIRFLD;

ENDREPEAT CNT = CNT + 1;

REPOSITION RPT_FLDS.INST_KEY;
FOR ALL DELETE RPT_FLDS.RPT_INST.INST_KEY RPT_FLDS.AIR.ID FROM RPTSTK;
COMMIT;
REPOSITION RPT_FLDS.INST_KEY;
FOR ALL INCLUDE RPT_FLDS.RPT_INST.INST_KEY RPT_FLDS.AIR.ID FROM RPTSTK;
COMMIT;
END
-RUN



-*move the values from DPT_AIRPORT to ORG_APC
TABLE FILE RPT_FLDS
PRINT AIRFLDS.SEQ_NO DPT_AIRPORT 
BY INST_KEY
WHERE INST_KEY IN FILE SAVE
ON TABLE SAVE AS SAVE3
END

MODIFY FILE RPT_FLDS
FIXFORM INST_KEY/7 AIRFLDS.SEQ_NO/2 ORG_APC/A3
MATCH INST_KEY
  ON MATCH CONTINUE
  MATCH * KEYS SEG AIRFLDS
    ON MATCH UPDATE DPT_AIRPORT ORG_APC
DATA ON SAVE3
END
-RUN

-**********************************************************
-* Remove the values from the original fields
-**********************************************************
SET ASNAME = ON

TABLE FILE RPT_FLDS
PRINT AIRFLDS.SEQ_NO DST_APC AS 'DPT_AIRPORT'
BY INST_KEY
WHERE INST_KEY IN FILE SAVE
ON TABLE SAVE AS SAVE3
END

MODIFY FILE RPT_FLDS
FIXFORM INST_KEY/7 AIRFLDS.SEQ_NO/2 DPT_AIRPORT/A3 

MATCH INST_KEY
  ON MATCH CONTINUE
  MATCH * KEYS SEG AIRFLDS
    ON MATCH UPDATE DPT_AIRPORT 
DATA ON SAVE3
END
-RUN

-*Check the results 
TABLE FILE RPT_FLDS
PRINT SEG AIR.ID SEG AIRFLDS.SEQ_NO 
BY INST_KEY
WHERE INST_KEY IN FILE SAVE
END
-RUN