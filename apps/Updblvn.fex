-* File Updvln.fex

SET ASNAMES=ON

-GOTO STEVEUPC

TABLE FILE A_BLV
PRINT PASSNGR_NAME
BY AIR_KEY
ON TABLE HOLD AS AJKAL
END
-RUN

MODIFY FILE A_BLV
FIXFORM AIR_KEY/A45 PASSNGR_NAME/A33
MATCH AIR_KEY
ON MATCH COMPUTE PASSNGR_NAME/A33 = CTRAN (33, PASSNGR_NAME, 47, 44, 'A33');
ON MATCH UPDATE PASSNGR_NAME
ON NOMATCH REJECT
DATA ON AJKAL
END
-RUN

TABLE FILE C_BLV
PRINT PASSNGR_NAME
BY CAR_KEY
ON TABLE HOLD AS CJKAL
END
-RUN

MODIFY FILE C_BLV
FIXFORM CAR_KEY/A82 PASSNGR_NAME/A33
MATCH CAR_KEY
ON MATCH COMPUTE PASSNGR_NAME/A33 = CTRAN (33, PASSNGR_NAME, 47, 44, 'A33');
ON MATCH UPDATE PASSNGR_NAME
ON NOMATCH REJECT
DATA ON CJKAL
END
-RUN


TABLE FILE H_BLV
PRINT PASSNGR_NAME
BY HTL_KEY
ON TABLE HOLD AS HJKAL
END
-RUN

MODIFY FILE H_BLV
FIXFORM HTL_KEY/A69 PASSNGR_NAME/A33
MATCH HTL_KEY
ON MATCH COMPUTE PASSNGR_NAME/A33 = CTRAN (33, PASSNGR_NAME, 47, 44, 'A33');
ON MATCH UPDATE PASSNGR_NAME
ON NOMATCH REJECT
DATA ON HJKAL
END
-RUN
-EXIT

-STEVEUPD

-* AIR

DEFINE FILE A_BLV
UPAXNAM/A3 = EDIT(PAXNAM, '999$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
NPAXNAM/A33=IF UPAXNAM NE '   ' THEN PAXNAM ELSE
EDIT(PAXNAM, '$$$999999999999999999999999999999') || '   ';
END

TABLE FILE A_BLV
PRINT AIR_KEY NPAXNAM AS 'PAXNAM'
BY AIR_KEY NOPRINT
ON TABLE HOLD
END

MODIFY FILE A_BLV
FIXFORM FROM HOLD
MATCH AIR_KEY
ON MATCH UPDATE PAXNAM
ON NOMATCH REJECT
DATA ON HOLD
END

-* CAR

DEFINE FILE C_BLV
UPAXNAM/A3 = EDIT(PAXNAM, '999$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
NPAXNAM/A33=IF UPAXNAM NE '   ' THEN PAXNAM ELSE
EDIT(PAXNAM, '$$$999999999999999999999999999999') || '   ';
END

TABLE FILE C_BLV
PRINT CAR_KEY NPAXNAM AS 'PAXNAM'
BY CAR_KEY NOPRINT
ON TABLE HOLD
END

MODIFY FILE C_BLV
FIXFORM FROM HOLD
MATCH CAR_KEY
ON MATCH UPDATE PAXNAM
ON NOMATCH REJECT
DATA ON HOLD
END

-* HTL

DEFINE FILE H_BLV
UPAXNAM/A3 = EDIT(PAXNAM, '999$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
NPAXNAM/A33=IF UPAXNAM NE '   ' THEN PAXNAM ELSE
EDIT(PAXNAM, '$$$999999999999999999999999999999') || '   ';
END

TABLE FILE H_BLV
PRINT HTL_KEY NPAXNAM AS 'PAXNAM'
BY HTL_KEY NOPRINT
ON TABLE HOLD
END

MODIFY FILE H_BLV
FIXFORM FROM HOLD
MATCH HTL_KEY
ON MATCH UPDATE PAXNAM
ON NOMATCH REJECT
DATA ON HOLD
END
-EXIT

-STEVEUPC

-* CAR

DEFINE FILE C_BLV
UPAXNAM/A1 = EDIT(PAXNAM, '9$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
NPAXNAM/A33=IF UPAXNAM NE ' ' THEN PAXNAM ELSE
EDIT(PAXNAM, '$99999999999999999999999999999999') || ' ';
END

TABLE FILE C_BLV
PRINT CAR_KEY NPAXNAM AS 'PAXNAM'
BY CAR_KEY NOPRINT
ON TABLE HOLD
END

MODIFY FILE C_BLV
FIXFORM FROM HOLD
MATCH CAR_KEY
ON MATCH UPDATE PAXNAM
ON NOMATCH REJECT
DATA ON HOLD
END
-EXIT