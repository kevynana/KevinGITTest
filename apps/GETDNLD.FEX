-INCLUDE SETECHO
-SET &DIRLST = &&CLT_PATH || 'DIRLIST.DAT';
-SET &DWNFIL = &&CLT_PATH || 'DOWNFILE.DAT';
-SET &FILNAM = &&CLT_PATH || 'FILENAME.DAT';
-RUN
FI DOWNLIST DISK &DIRLST
FI DNLDFLNM DISK &DWNFIL
FI FILENAME DISK &FILNAM
FI FLNAME   DISK &FILNAM
-RUN

-SET &FILES = &&DNL_PATH || '*.EXE';
DOS DIR &FILES > &DIRLST
-RUN

EX GETFILE
-*EX MAKEDNLD
-RUN
-READ FILENAME &&ZIP.8

DOS STATE &DWNFIL
-RUN
-IF &RETCODE NE 0 GOTO SKIP_A;
DOS ERASE &DWNFIL
-RUN
-SKIP_A

DOS STATE &DIRLST
-RUN
-IF &RETCODE NE 0 GOTO SKIP_B;
DOS ERASE &DIRLST
-RUN
-SKIP_B

DOS STATE &FILNAM
-RUN
-IF &RETCODE NE 0 GOTO SKIP_C;
DOS ERASE &FILNAM
-RUN
-SKIP_C

FILEDEF DOWNLIST CLEAR
FILEDEF DNLDFLNM CLEAR
FILEDEF FILENAME CLEAR
FILEDEF FLNAME   CLEAR
-RUN
