-*****************THIS HEADER REPRESENTS THE 80 CHARACTER MAXIUM FOR PROGRAMS**
-INCLUDE SETECHO
SET ASNAMES=ON

-SET &&RPTSUF = 'NONCOMPLIANCE';
-SET &FMM=EDIT(&&FROMDT,'$$$$$$99');
-SET &FMD=EDIT(&&FROMDT,'$$$$$$$$$99');
-SET &FMY=EDIT(&&FROMDT,'$9999');
-SET &TOM=EDIT(&&TODT,'$$$$$$99');
-SET &TOD=EDIT(&&TODT,'$$$$$$$$$99');
-SET &TOY=EDIT(&&TODT,'$9999');
-* PRIOR DATES
-SET &FXMM=EDIT(&&FXDATE,'$$$$$$99');
-SET &FXMD=EDIT(&&FXDATE,'$$$$$$$$$99');
-SET &FXMY=EDIT(&&FXDATE,'$9999');
-SET &TXOM=EDIT(&&TXDATE,'$$$$$$99');
-SET &TXOD=EDIT(&&TXDATE,'$$$$$$$$$99');
-SET &TXOY=EDIT(&&TXDATE,'$9999');

-INCLUDE FDEFRPTS
-RUN

JOIN MXNONHLD.LEVEL2 IN MXNONHLD TO MXNONHTL.LEVEL2 IN MXNONHTL AS J1
END
-RUN


DEFINE FILE MXNONHLD
NOWTOD/A8 WITH ADV_TKT = HHMMSS (NOWTOD);
BLANK/A1 = ' ';
END
-RUN

TABLE FILE MXNONHLD
-INCLUDE HEADAIR
SUM MXADV_TKT AS '0-6,TICKETS'
COMPUTE 
MXADVP/P12 = IF ((ADV_TKT LT 1) AND (ADV_TKT GT (-1))) THEN 0 ELSE
                  ((MXADV_TKT/ADV_TKT)*100); AS '% OF,0-6,TICKETS'
MXREF_TKT AS 'REFUNDABLE,TICKETS'
COMPUTE 
MXREFP/P12 = IF ((REF_TKT LT 1) AND (REF_TKT GT (-1))) THEN 0 ELSE
                  ((MXREF_TKT/REF_TKT)*100); AS '% OF,REFUNDABLE,TICKETS'
MXTRA_TKT AS 'TRADITIONAL,TICKETS'
COMPUTE
MXTRAP/P12 = IF ((TRA_TKT LT 1) AND (TRA_TKT GT (-1))) THEN 0 ELSE
                  ((MXTRA_TKT/TRA_TKT)*100); AS '% OF,TRADITIONAL,TICKETS'
NONPREF_RM AS 'NON-PREFERRED,NIGHTS'
COMPUTE
NONPREFP/P12 = IF ((NNROOMS LT 1) AND (NNROOMS GT (-1))) THEN 0 ELSE
                    ((NONPREF_RM/NNROOMS)*100); AS 'NON-PREFERRED,%'
RATE_RM1 AS '$150-$199,NIGHTS'
COMPUTE 
RATERMP1/P12 = IF ((NNROOMS1 LT 1) AND (NNROOMS1 GT (-1))) THEN 0 ELSE
                    ((RATE_RM1/NNROOMS1)*100); AS '$150-$199,%'
RATE_RM2 AS '$200-$249,NIGHTS'
COMPUTE
RATERMP2/P12 = IF ((NNROOMS1 LT 1) AND (NNROOMS1 GT (-1))) THEN 0 ELSE
                    ((RATE_RM2/NNROOMS1)*100); AS '$200-$249,%'
RATE_RM3 AS '$250+,NIGHTS'
COMPUTE 
RATERMP3/P12 = IF ((NNROOMS1 LT 1) AND (NNROOMS1 GT (-1))) THEN 0 ELSE
                    ((RATE_RM3/NNROOMS1)*100); AS '$250+,%'
BY LEVEL2 AS ' '
FOOTING
"</2"
"THIS REPORT HAS THE FOLLOWING EXCLUSIONS/INCLUSIONS:"
"ALL PORTIONS EXCLUDE - AMTRAK, SHUTTLE FLIGHTS"
"REFUNDABLE TICKETS INCLUDE ONLINE EXCHANGES"
"0-6 TICKETS EXCLUDE ALL EXCHANGES"
"TRADITIONAL TICKETS EXCLUDE ONLINE EXCHANGES"
"ALL PORTIONS INCLUDE ONLY USA AND CANADA"
"NON-PREFERRED HOTELS ONLY INCLUDE CITIES IN THE MARKET FILE"
ON TABLE SET PAGE-NUM OFF
ON LEVEL2 RECOMPUTE MULTILINES AS 'TOTAL FOR'
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT

ON TABLE SET STYLE *
TYPE=DATA, COLUMN=N2, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNONAD' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N4, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNONRE' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N6, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNONTR' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N8, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNONNO' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N10, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNO150' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N12, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNO200' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

TYPE=DATA, COLUMN=N14, \
URL=&&SRVR.EVAL/ibi_apps/WFServlet? \
(IBIF_ex='DRNO250' ROW_LABEL=N1 LSEL=LEVEL_DESC\
 SETFNM='&&DTTMSTRM.EVAL' \
 FPARM='&&DTTMID.EVAL' \
ROLUP='&&ROLLUP' user='&&UNAME'), $

UNITS=IN, PAGESIZE='Letter', LEFTMARGIN=0.250000, RIGHTMARGIN=0.250000, 
    TOPMARGIN=0.500000, BOTTOMMARGIN=0.250000, SQUEEZE=ON, 
    ORIENTATION=LANDSCAPE, $
TYPE=REPORT, FONT=TIMES NEW ROMAN, SIZE=7, BACKCOLOR=NONE, STYLE=NORMAL, $
TYPE=HEADING, OBJECT=TEXT, SIZE=8, COLOR=BLACK, $
TYPE=HEADING, LINE=4, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=5, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=6, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=7, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=8, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=10, SIZE=9, STYLE=BOLD, COLOR=GREY, $
TYPE=HEADING, LINE=11, SIZE=12, STYLE=BOLD+ITALIC, FONT=COURIER NEW, $
TYPE=HEADING, LINE=12, SIZE=12, STYLE=BOLD+ITALIC, FONT=COURIER NEW, $
TYPE=FOOTING, SIZE=7, STYLE=BOLD, COLOR=GREY, $
TYPE=TITLE, STYLE=BOLD, $
TYPE=SUBTOTAL, SIZE=8, STYLE=BOLD, $
TYPE=GRANDTOTAL, SIZE=8, STYLE=BOLD, $
TYPE=REPORT, IMAGE=&&TNTPIC,  POSITION=(&&TNTDTPOS), SIZE=(&&TNTDTSIZ), $
TYPE=REPORT, IMAGE=&&ROLLPIC, POSITION=(&&ROLDTPOS), SIZE=(&&ROLDTSIZ), $

ENDSTYLE
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
-*
END
-RUN







