SET ASNAMES = ON 

-INCLUDE SETECHO

DEFINE FILE A_ORBIS
LVL1/A15 = '59';
ICODE/A36 = '59-999999';
END
TABLE FILE A_ORBIS
PRINT AIR_KEY LVL1 AS 'LEVEL1' LVL1 AS 'LEVEL2' ICODE AS 'INT_CODE'
BY AIR_KEY NOPRINT
IF TKT_NUM CONTAINS '7986869496'
ON TABLE HOLD
END
-RUN
 
MODIFY FILE A_ORBIS
FIXFORM FROM HOLD
MATCH AIR_KEY
ON MATCH UPDATE LEVEL1
ON MATCH UPDATE LEVEL2
ON MATCH UPDATE INT_CODE
ON NOMATCH REJECT
DATA ON HOLD
END
-RUN

DEFINE FILE S_ORBIS
AROL_LEV5/A15 = '59';
END
TABLE FILE S_ORBIS
PRINT AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR AROL_LEV5 AS 'AROLL_LEV5'
BY AIR_KEY NOPRINT
BY EMBARK NOPRINT
BY ROUTE NOPRINT
BY TKT_SORT NOPRINT
BY SEG_NBR NOPRINT
IF AIR_KEY CONTAINS 7986869496
ON TABLE HOLD AS SHOLD
END
-RUN

MODIFY FILE S_ORBIS
FIXFORM FROM SHOLD
MATCH AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR
ON MATCH UPDATE AROLL_LEV5
ON NOMATCH REJECT
DATA ON SHOLD
END
-RUN

DEFINE FILE M_ORBIS
AROL_LEV5/A15 = '59';
END
TABLE FILE M_ORBIS
PRINT AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR AROL_LEV5 AS 'AROLL_LEV5'
BY AIR_KEY NOPRINT
BY EMBARK NOPRINT
BY ROUTE NOPRINT
BY TKT_SORT NOPRINT
BY SEG_NBR NOPRINT
IF AIR_KEY CONTAINS 7986869496
ON TABLE HOLD AS MHOLD
END
-RUN

MODIFY FILE M_ORBIS
FIXFORM FROM MHOLD
MATCH AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR
ON MATCH UPDATE AROLL_LEV5
ON NOMATCH REJECT
DATA ON MHOLD
END
-RUN

DEFINE FILE D_ORBIS
AROL_LEV5/A15 = '59';
END
TABLE FILE D_ORBIS
PRINT AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR AROL_LEV5 AS 'AROLL_LEV5'
BY AIR_KEY NOPRINT
BY EMBARK NOPRINT
BY ROUTE NOPRINT
BY TKT_SORT NOPRINT
BY SEG_NBR NOPRINT
IF AIR_KEY CONTAINS 7986869496
ON TABLE HOLD AS DHOLD
END
-RUN

MODIFY FILE D_ORBIS
FIXFORM FROM DHOLD
MATCH AIR_KEY EMBARK ROUTE TKT_SORT SEG_NBR
ON MATCH UPDATE AROLL_LEV5
ON NOMATCH REJECT
DATA ON DHOLD
END
-RUN