-**********************************************************
-* Set up to run Airline Market Share by Month
-**********************************************************
-INCLUDE SETECHO

-SET &&AUSEPASS = &&WEB_PATH || 'AUSEINCL.FTM';
-SET &&CUSEPASS = &&WEB_PATH || 'CUSEINCL.FTM';
-SET &&HUSEPASS = &&WEB_PATH || 'HUSEINCL.FTM';

FILEDEF AUSEINCL DISK &&AUSEPASS
FILEDEF CUSEINCL DISK &&CUSEPASS
FILEDEF HUSEINCL DISK &&HUSEPASS
-RUN
-***************************************************
-* get date values from BRPTINST database and
-* assign to the global variables.
-***************************************************
EX QRSetDate
-RUN
-***************************************************
-* reset dates and report type in control file
-***************************************************
-*specify the values for program catqtr
-SET &&RPTTYP = 'SPC';
-SET &&SMD = 'M';
-*reset the date ranges for Market Share by Month, 13 month data
DEFINE FILE BRPTINST
  XTO_DATE/YYMD = TO_DATE;
  XFM_DATE/YYMD = DATEADD(XTO_DATE,'M',-12);
  X2FROMYM/YYM  = XFM_DATE;
  X3FROMDATE/YYMD = X2FROMYM;
END 

TABLE FILE BRPTINST
PRINT X3FROMDATE XTO_DATE
WHERE INST_KEY EQ &&IKEY
ON TABLE SAVE
END
-RUN
-READ SAVE &&FROMDT.8. &&TODT.8. 
-SET &&FROMDT = EDIT('&&FROMDT.EVAL', '9999/99/99');
-SET &&TODT   = EDIT('&&TODT.EVAL', '9999/99/99');

-**************************************************************
-*RESET rollup_code and comp to the base rollup_code and comp.
-**************************************************************
-SET &&ROLLUP = '&&BASEROLL.EVAL';
-SET &&COMPNY = '&&BASECOMP.EVAL';
EX QRSETBDB
-RUN

EX AIRUSE
-RUN

EX NQAMSBM
-RUN
