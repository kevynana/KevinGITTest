-* 1/124/05 - DEB ADDED CODE FOR GLOBAL CURRENCY
-* 8/29/13 - DEB ADDED CODE FOR NEW SETFILE CHBNMPXI
-* 9/9/13 - DEB ADDED CODE FOR NEW SETFILE CHBNMPXD
-* 7/17/14 - joy added code to reset and execute codegen for new report settings parms
-*  02/02/2015  REJ  S-05681 Changes to the no data report to prepare for the Available
-*                           Report changes.  Rollup Code is being removed from BRPTINST in
-*                           ER5, so I'm removing the reference to the ROLLUP_CODE in that report.
-*  03/31/2015  REJ  S-05681 Changes for Available Reports.  Adding code so that the
-*                           program will run in current Review and in Available Reports.
-* 04/13/2015 - DEB - S-07573 - ADDED CODE FOR BIOTBNM
 
-* 5/11/2015    JEK S-07665 Changed to correct no records report error with multiple report settings selections
-*  11/20/2015  REJ  S-12224 Changes for Available Reports.  Adding code so parameters would show
-*                            in the subfoot.
-* 10/28/2015 DLV S-12409 - Added new routine for KWBNMPX
-*  02/04/2016  REJ  S-13237 Available Report changes so parameters would show in the subfoot.
-*  09/12/2016  REJ  S-24432 ER5 changes for ABBNM1.
-*  10/05/2016  REJ  S-24432 ER5 Testing updates.
-*  12/29/2016  REJ  S-28553 Move ER5 My Reports to production.
-*4/20/2017-JEM-S-33318-updated logic for no records report

-INCLUDE SETECHO
EX SETCG SETFILE=&&SETF
-RUN
-INCLUDE OTHPARMS
 
-SET &&DRILLABLE = 'N';
 
-SET &&RPT_HOLD = 'RPTHOLD';
 
-INCLUDE SetParmtime
-RUN
-**********************************************************************
-* DETERMINE IF WE HAVE WEB DEPLOYMENT OR LOCAL STAND ALONE
-* SET PATH FOR SAVING THE SETFILE
-**********************************************************************
-******LOCAL DEPLOYMENT
-IF &&DEPLOY EQ 'W' GOTO SETWEB;
-SET &&SETFNM= &&LOCPATH || &&DTTMSTRM ||'.FTM';
COPY &&SETF &&SETFNM
-RUN
 
-******WEB DEPLOYMENT
-SETWEB
-SET &&WEBPATH = '&&WEBSRV.EVAL' || '\TTWEB\ ' || &&ROLLUP || '\ '||&&UNAME.EVAL|| '\';
-SET &&SETFNM = &&WEBPATH || &&DTTMSTRM ||'.FTM';
 
COPY &&VARFWEB &&SETFNM
-INCLUDE SETFPARM
-RUN
 
FILEDEF AUSEINCL DISK &&AUSEPASS
-RUN
FILEDEF CUSEINCL DISK &&CUSEPASS
-RUN
FILEDEF HUSEINCL DISK &&HUSEPASS
-RUN
FILEDEF LUSEINCL DISK &&LUSEPASS
-RUN
 
-INCLUDE SELCATQT
-RUN
 
EX &&CATQTRPR
-RUN
 
FILEDEF AUSEINCL CLEAR
-RUN
FILEDEF CUSEINCL CLEAR
-RUN
FILEDEF HUSEINCL CLEAR
-RUN
FILEDEF LUSEINCL CLEAR
-RUN
 
-SET &&SMD = 'S';
-RUN
 
EX AIRUSE
-RUN
-SET &&RPTGRP = 'AIR';
 
 
- IF &&SETF EQ 'ABBNM1' THEN GOTO ABBNM1 ELSE
- IF &&SETF EQ 'ABBNMMN' THEN GOTO ABBNMMN ELSE
- IF &&SETF EQ 'CGBNM' THEN GOTO CGBNM ELSE
- IF &&SETF EQ 'CGBNMMN' THEN GOTO ABBNMMN ELSE
- IF &&SETF EQ 'CGBNMR' OR 'CGBNM1' THEN GOTO CGBNM1 ELSE
- IF &&SETF EQ 'UPBNM1' THEN GOTO UPBNM1 ELSE
- IF &&SETF EQ 'BDBNMPX' OR 'BDBNMPX2' OR 'BDBNMPX3' OR 'CEBNMPX' OR 'CHBNMPX' OR 'CHBNMPXI' OR
- 'CHBNMPXD' OR 'CHUABMPX' OR 'ARBNMPX' OR 'ARBNMP2' OR 'CEBNMPX1' THEN GOTO CEBNMPX ELSE
- IF '&&SETF.EVAL' EQ 'BIOTBNM' THEN GOTO BIOTRO ELSE
- IF '&&SETF.EVAL' EQ 'KWBNMPX' THEN GOTO KIEWIT ELSE GOTO ABBNM;
 
-ABBNM
EX BNMAIR
-RUN
 
 
EX BNMAIR2
-RUN
FILEDEF RPTPARMS CLEAR
-RUN
 
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB1;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB1_CONT;
-:AB1
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB1_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX BNMCAR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB2;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB2_CONT;
-:AB2
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB2_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP1;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP1
 
EX CODEGEN
-RUN
 
EX BNMHTL
-RUN
 
-IF &&FROMAVRP NE 'Y' GOTO :AVSF0;
-INCLUDE AVRP_SUBFOOT
-:AVSF0
 
-IF &&SETF EQ 'MXBNM2' THEN GOTO METX1;

-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX BNMSUM
-RUN
 
-GOTO NEXT
 
 
-METX1
EX MXBNMSUM
-RUN
 
-GOTO NEXT;
 
-*
-ABBNM1
 
-IF &&FROMAVRP NE 'Y' GOTO :NM1;
-SET &&RPTGRP_OVERRIDE='AIR';
EX CODEGEN
-INCLUDE SELCATQT
-RUN
-:NM1
 
EX BNMAIR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
-IF &&FROMAVRP NE 'Y' GOTO :NM2;
-SET &&RPTGRP_OVERRIDE='CAR';
EX CODEGEN
-INCLUDE SELCATQT
-RUN
-:NM2
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB3;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB3_CONT;
-:AB3
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB3_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX BNMCAR1
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
-IF &&FROMAVRP NE 'Y' GOTO :NM3;
-SET &&RPTGRP_OVERRIDE='HTL';
EX CODEGEN
-INCLUDE SELCATQT
-RUN
-:NM3
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB4;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB4_CONT;
-:AB4
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB4_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP2;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP2
 
EX CODEGEN
-RUN
 
EX BNMHTL1
-RUN
 
-IF &&FROMAVRP NE 'Y' GOTO :NM4;
-INCLUDE AVRP_SUBFOOT
-:NM4


-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX BNMSUM1
-RUN
 
-GOTO NEXT
 
-*
-ABBNMMN
EX BNMAMON
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB5;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB5_CONT;
-:AB5
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB5_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX BNMCMON
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB6;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB6_CONT;
-:AB6
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB6_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP3;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP3
 
EX CODEGEN
-RUN
 
EX BNMHMON
-RUN
 
-IF &&FROMAVRP NE 'Y' GOTO :AVSF1;
-INCLUDE AVRP_SUBFOOT
-:AVSF1

-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX BNMSMMON
-RUN
 
-GOTO NEXT
 
-CGBNM
EX BNMAIRT
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB7;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB7_CONT;
-:AB7
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB7_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
 
EX BNMCART
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB8;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB8_CONT;
-:AB8
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB8_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP4;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP4
 
EX CODEGEN
-RUN
 
EX BNMHTLT
-RUN

-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX BNMSUMT
-RUN
 
-GOTO NEXT
 
-CGBNM1
 
EX CGBAIRT
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB9;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB9_CONT;
-:AB9
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB9_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
 
EX CGBCART
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB10;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB10_CONT;
-:AB10
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB10_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP5;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP5
 
EX CODEGEN
-RUN
 
EX CGBHTLT
-RUN

-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX CGBSUMT
-RUN
-GOTO NEXT
 
 
-* UPBNM1
 
-UPBNM1
EX UPBNMAIR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB11;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB11_CONT;
-:AB11
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB11_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX UPBNMCAR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB12;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB12_CONT;
-:AB12
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB12_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP6;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP6
 
EX CODEGEN
-RUN
 
EX UPBNMHTL
-RUN

-IF &&AIRREC EQ 'N' AND &&CARREC EQ 'N' AND &&HTLREC EQ 'N' THEN GOTO NORECORDS;

 
EX UPBNMSM1
-RUN
 
-GOTO NEXT
 
-CEBNMPX
 
EX CEBNMAIR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
-IF '&&SETF.EVAL' EQ 'BDBNMPX' THEN GOTO SkipCar;
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
-*EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB13;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB13_CONT;
-:AB13
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB13_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX CEBNMCAR
-RUN
 
-SkipCar;
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB14;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB14_CONT;
-:AB14
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB14_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP7;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP7
 
EX CODEGEN
-RUN
 
EX CEBNMHTL
-RUN
 
-IF &&AIRDATA EQ 'N' AND &&CARDATA EQ 'N' AND &&HTLDATA EQ 'N' THEN GOTO NORECORDS;
-RUN
 
-IF '&&SETF.EVAL' EQ 'BDBNMPX2' OR 'BDBNMPX3' THEN GOTO Baird2;
 
EX CEBNMSUM
-RUN
 
-GOTO NEXT
 
-Baird2
 
-IF &&FROMAVRP NE 'Y' GOTO :AVSF2;
-INCLUDE AVRP_SUBFOOT
-:AVSF2
 
EX BDBNMSUM
-RUN
 
-GOTO NEXT
 
-BIOTRO
 
EX BIOTAIR
-RUN

-IF &&AIRREC EQ 'N' THEN GOTO NORECORDS;
 
EX BIOTSUM
-RUN
 
-GOTO NEXT
 
 
-KIEWIT
 
EX KWBNMAIR
-RUN
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX CARUSE
-RUN
 
-SET &&RPTGRP = 'CAR';
 
 
-RUN
DEFINE FILE BRPTINST
RT/A3 = 'CAR';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB14;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB14_CONT;
-:AB14
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB14_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
EX CODEGEN
-RUN
 
EX KWBNMCAR
-RUN
 
 
 
FILEDEF RPTPARMS CLEAR
-RUN
 
EX HTLUSE
-RUN
 
-SET &&RPTGRP = 'HTL';
EX UDIDGEN
-RUN
DEFINE FILE BRPTINST
  RT/A3 = 'HTL';
END
TABLE FILE BRPTINST
PRINT RT AS 'RPT_GROUP'
BY INST_KEY
ON TABLE SAVE AS AIRACH00
END
-RUN
MODIFY FILE BRPTINST
-IF &&FROMAVRP EQ 'Y' GOTO :AB15;
FIXFORM INST_KEY/7 RPT_GROUP/3
-GOTO :AB15_CONT;
-:AB15
FIXFORM INST_KEY/11 RPT_GROUP/3
-:AB15_CONT
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
DATA ON AIRACH00
END
-RUN
 
-IF &&FROMAVRP EQ 'Y' GOTO :SAP8;
 
TABLE FILE BRPTFLDS
PRINT AIR.ID AIR.INCL1
BY INST_KEY
ON TABLE SAVE AS AIRACH11
END
-RUN
 
TABLE FILE BRPTFLDS
PRINT AIRFLDS.PASSENGER
BY RPT_INST.INST_KEY
BY AIRFLDS.SEQ_NO
ON TABLE SAVE AS AIRACH22
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTL.ID/1 HTL.INCL1/1
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTL
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTL.INCL1
DATA ON AIRACH11
END
-RUN
 
MODIFY FILE BRPTFLDS
FIXFORM INST_KEY/7 HTLFLDS.SEQ_NO/2 HTLFLDS.PASSENGER/A33
REPOSITION INST_KEY
MATCH INST_KEY
  ON MATCH CONTINUE
  ON NOMATCH INCLUDE
MATCH * KEYS SEG HTLFLDS
  ON NOMATCH INCLUDE
  ON MATCH UPDATE HTLFLDS.PASSENGER
DATA ON AIRACH22
END
-RUN
 
-:SAP8
 
EX CODEGEN
-RUN
 
EX KWBNMHTL
-RUN
 
-IF &&AIRDATA EQ 'N' AND &&CARDATA EQ 'N' AND &&HTLDATA EQ 'N' THEN GOTO NORECORDS;
-RUN
 
 
EX KWBNMSUM
-RUN
 
 
 
-NEXT
-* REJ ADDED TO TRAP ERRORS
-SET &&FEXNOW=&&EXPARM;
-INCLUDE ERRORCHK
-IF &&RET GT 1 GOTO XXIT;
-* REJ ADDED TO TRAP ERRORS
 
-IF &RECORDS GT 0 THEN GOTO DOIT;
 
-NORECORDS
-IF &&FROMAVRP NE 'Y' GOTO :AVSF2;
-INCLUDE OTHPARMS
-INCLUDE AVRP_SUBFOOT
-:AVSF2

-INCLUDE NORECRPT
-RUN
 
-DOIT
 
-XXIT
 
