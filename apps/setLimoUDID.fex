-**************************************************************************************************
-* setLimoUDID.fex
-*
-* 1. Change RPT_GROUP from Car to LIM, from CDD to LDD in Rollset_master if the Global_parm like 
-*    'L%' or 'l%' (starts with L). 
-* 2. Add LIM and LDD to RPT_MSTR for Limo Analysis.
-*
-**************************************************************************************************
-SET &ECHO = ALL;
-GOTO :RPTMSTR;

-* Update Rollset_master
TABLE FILE ROLLSET_MASTER
PRINT *
WHERE USE_PARM LIKE 'L%' OR 'l%'
ON TABLE HOLD
END
-RUN

MODIFY FILE ROLLSET_MASTER
FIXFORM FROM HOLD
COMPUTE RPT_GROUP = IF RPT_GROUP EQ 'CAR' THEN 'LIM' ELSE 'LDD';
COMPUTE CAT_CAR = 'N';
COMPUTE CAT_LIM = 'Y';
MATCH GLOBAL_PARM
  ON MATCH UPDATE RPT_GROUP CAT_CAR CAT_LIM
  ON NOMATCH REJECT
DATA ON HOLD
END
-RUN

-:RPTMSTR
MODIFY FILE RPT_MSTR
FIXFORM RPT_GROUP/3 RPT_ID/20 RPT_NAME/50 RPT_TYPE/3 CONTROL_ID/3 CATID/1
MATCH RPT_GROUP
  ON NOMATCH INCLUDE
  ON MATCH UPDATE CATID
DATA
LIMLIMOMaster          LIMO Analysis Reports                             AAAPGM4
OVROVRMaster           Overview / Summary reports                        AAAPGM8 
END
-RUN
-EXIT

-*Change rpt_group from CAR TO LIM, CDD TO LDD
TABLE FILE RPT_INST
PRINT SEG INST_KEY
WHERE RPT_GROUP EQ 'CAR' OR 'CDD'
AND USE_PARM LIKE 'L%' OR 'l%'
ON TABLE HOLD
END  
-RUN
MODIFY FILE RPT_INST
FIXFORM FROM HOLD
COMPUTE RPT_GROUP = IF RPT_GROUP EQ 'CAR' THEN 'LIM' ELSE 'LDD';
MATCH INST_KEY
  ON MATCH UPDATE RPT_GROUP
  ON NOMATCH REJECT
DATA ON HOLD
END
-RUN










