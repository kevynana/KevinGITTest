-* 07/18/17 - DLV - S-37356 program to update TRP_KEY for ATIEVA-R data



 -INCLUDE SETECHO

SET ASNAMES = ON
-SET &&ROLL = 'ATIEVA-R';

DEFINE FILE A_ATIEVA
XL01/A8 = 'ATIEVA-R';
XL02/A10 = XL01 || TRIP_PURPOSE;
END
TABLE FILE A_ATIEVA
PRINT XL02 AS 'TRP_KEY'
BY AIR_KEY
ON TABLE HOLD
END
-RUN

MODIFY FILE A_ATIEVA
FIXFORM FROM HOLD
MATCH AIR_KEY
ON MATCH UPDATE TRP_KEY
ON NOMATCH REJECT
DATA ON HOLD
END
-RUN

DEFINE FILE C_ATIEVA
XL01/A8 = 'ATIEVA-R';
XL02/A10 = XL01 || TRIP_PURPOSE;
END
TABLE FILE C_ATIEVA
PRINT XL02 AS 'TRP_KEY'
BY CAR_KEY
ON TABLE HOLD AS CARHOLD
END
-RUN

MODIFY FILE C_ATIEVA
FIXFORM FROM CARHOLD
MATCH CAR_KEY
ON MATCH UPDATE TRP_KEY
ON NOMATCH REJECT
DATA ON CARHOLD
END
-RUN



 



DEFINE FILE H_ATIEVA
XL01/A8 = 'ATIEVA-R';
XL02/A10 = XL01 || TRIP_PURPOSE;
END
TABLE FILE H_ATIEVA
PRINT XL02 AS 'TRP_KEY'
BY HTL_KEY
ON TABLE HOLD AS HTLHOLD
END
-RUN

MODIFY FILE H_ATIEVA
FIXFORM FROM HTLHOLD
MATCH HTL_KEY
ON MATCH UPDATE TRP_KEY
ON NOMATCH REJECT
DATA ON HTLHOLD
END
-RUN