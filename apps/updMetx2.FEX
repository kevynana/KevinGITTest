SET ASNAMES=ON

TABLE FILE IHIER_SL
ON TABLE SET PAGE-NUM OFF
PRINT SEL_KEY AS 'ROLL_KEY' AND SEL_KEY AND SEL_DESC
BY INST_KEY
WHERE INST_KEY CONTAINS 'METX-R';
ON TABLE HOLD AS HOLD1
END
-RUN

MATCH FILE HOLD1
PRINT INST_KEY AND SEL_DESC AND SEL_KEY
BY ROLL_KEY NOPRINT
RUN
FILE HPMETX
SUM
ROLL_KEY AND LEVEL_DESC
BY ROLL_KEY NOPRINT
AFTER MATCH HOLD AS HOLD2 OLD
END
-RUN

TABLE FILE HOLD2
PRINT INST_KEY AND SEL_KEY AND 
COMPUTE SEL_DESC/A30 = LJUST (30, LEVEL_DESC, SEL_DESC);
BY INST_KEY NOPRINT
ON TABLE HOLD AS HOLD3
END
-RUN

MODIFY FILE IHIER_SL
FIXFORM INST_KEY/72 SEL_KEY/50 SEL_DESC/30
MATCH INST_KEY
ON MATCH UPDATE SEL_DESC
ON NOMATCH REJECT
DATA ON HOLD3
END
