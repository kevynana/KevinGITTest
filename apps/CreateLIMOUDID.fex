-**********************************************************************************************************
-* CreateLIMOUDID.fex
-*
-* The job is used only once when we separate limo udid from car udid.
-* 
-**********************************************************************************************************

-SET &ECHO = ALL;
-SET &&DRV = '\\&&DATASRV.EVAL\D$';

TABLE FILE ROLLUP
PRINT COMP
BY ROLLUP_CODE 
WHERE UPD_ENABLE EQ 'X';
ON TABLE SAVE
END
-RUN
-SET &TOTALFILES = &LINES;


-REPEAT TOEND &TOTALFILES TIMES
-READ SAVE NOCLOSE &ROLLUP.8. &&COMP.6.
-TYPE &ROLLUP : &&COMP

-SET &PATHA = '&&DRV.EVAL' | '\TNT\TTRACKER\DATA\';
-SET &PATHB = '&&DRV.EVAL' | '\TNT\TTRACKER\UDIDFiles\';

-*If Car UDID file exists, it will create LIMO UDID file.
-CHKCARDATA
-SET &CARUDID = '&PATHA.EVAL' || 'UC' | '&&COMP.EVAL' || '.FOC';
-DOS STATE &CARUDID
-TYPE RETCODE: &RETCODE 

-IF &RETCODE.EVAL NE 0 THEN GOTO TOEND;

-COPYLIMO
-SET &DATASRC  = '&PATHB.EVAL' || 'LIMDUMMY.FOC';
-SET &MASSRC   = '&PATHB.EVAL' || 'LIMUDID.MAS';
 
-SET &DATADEST = '&PATHA.EVAL' || 'UL' | '&&COMP.EVAL' || '.FOC';
-SET &MASDEST  = '&PATHA.EVAL' || 'UL' | '&&COMP.EVAL' || '.MAS';
 
-DOS COPY &DATASRC &DATADEST
-DOS COPY &MASSRC &MASDEST
-RUN


-TOEND
