-* File UPDMXLVL.FEX

SET ASNAMES=ON

-* MODIFY AIR DATABASE

TABLE FILE A9METX
PRINT INT_CODE
BY AIR_KEY
WHERE BR_CL_IDX EQ 'MT284828'
ON TABLE HOLD AS JKHLD1
END

DEFINE FILE JKHLD1
LEV2/A25 = GETTOK (INT_CODE, 36, -2, '-', 25 , LEV2);
END

TABLE FILE JKHLD1
PRINT LEV2 AS 'LEVEL2'
      INT_CODE
BY AIR_KEY
ON TABLE HOLD
END

MODIFY FILE A9METX
FIXFORM FROM HOLD
MATCH AIR_KEY
ON MATCH UPDATE LEVEL2
ON NOMATCH REJECT
DATA ON HOLD
END


-* MODIFY HOTEL DATABASES

TABLE FILE H9METX
PRINT INT_CODE
BY HTL_KEY
WHERE BR_CL_IDX EQ 'MT284828'
ON TABLE HOLD AS HTLHLD
END

DEFINE FILE HTLHLD
LEV2/A25 = GETTOK (INT_CODE, 36, -2, '-', 25 , LEV2);
END

TABLE FILE HTLHLD
PRINT LEV2 AS 'LEVEL2'
      INT_CODE
BY HTL_KEY
ON TABLE HOLD
END

MODIFY FILE H9METX
FIXFORM FROM HOLD
MATCH HTL_KEY
ON MATCH UPDATE LEVEL2
ON NOMATCH REJECT
DATA ON HOLD
END

-* UPDATE CAR DATABASES

TABLE FILE C9METX
PRINT INT_CODE
BY CAR_KEY
WHERE BR_CL_IDX EQ 'MT284828'
ON TABLE HOLD AS CARHLD
END

DEFINE FILE CARHLD
LEV2/A25 = GETTOK (INT_CODE, 36, -2, '-', 25 , LEV2);
END

TABLE FILE CARHLD
PRINT LEV2 AS 'LEVEL2'
      INT_CODE
BY CAR_KEY
ON TABLE HOLD
END

MODIFY FILE C9METX
FIXFORM FROM HOLD
MATCH CAR_KEY
ON MATCH UPDATE LEVEL2
ON NOMATCH REJECT
DATA ON HOLD
END




















