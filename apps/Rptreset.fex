-**********************************************************************
-*DATE           NAME               DESCRIPTION
-*6/17/02      STEVE                Added TKT_MAIN (T_XXXX file).
-*3/18/14      DEB                  ADDED ROUTINE FOR PETS
-*5/8/14       DEB                  ADDED ROUTINE FOR CTI-R
-*6/26/14      DEB                  ADDED ROUTINE FOR DDJCAP-R
-*10/1/14      DEB                  ADDED ROUTINE FOR PMGI-R
-*03/30/2015   DEB                  S-08177 CHAANGED RETONE-R to display
-*                                          all in lowercase
-*4/06/05      DEB                  S-07904 ADDED JKJK-R to display LLC
-*                                          in all caps
-*5/20/15      DEB                  S-08993 Added NWEA-R to display NW
-*                                          and NWEA in all caps
-*5/21/15      DEB                  S-09193 added IDS to show SMT in all caps
-*06/10/15     DEB                  S-09297 added APOMD-R
-*06/26/15     DEB                  S-09865 added DATAGR-R
-*10/15/15 - Joy - S-12083 Added code to Correct mixed case for UNIF-R rollup code
-*10/27/15 - Joy - S-12230 Added code to correct mixed case for TPI-R rollup code
-*02/24/16 - JEM - S-15795  Corrected HDR being changed to mix case 
-*06/01/16 - DLV - S-18254 - Added code to correct mixed case SLOAN-R
-*11/09/16 - DLV - S-26847 - Added code to correct mixed case CCA-R
-*11/30/16 - DLV - S-27228 - Added code to correct mixed case RDG-R
-*12/13/16 - DLV - S-27345 - Added code to correct mixed case HBFULL-R
-*2/03/17-REJ-S-29460-Changed the code to use the sql version of ROLLUP always.
-*02/20/17 - DLV-S-28324 - Added code to corrected mixed case CDIC-R
-*02/22/17 - DLV -S-30939 Changed &AGENCY.2. TO &AGENCY.11.
-*3/20/17 - JEM - S-31904 Added logic to not LCWORD Allstate's contact name
-*08/08/17 - DLV - S-37941 - Added code to correct mixed case CDK-R
-******************************************************************
-*****
-INCLUDE SETECHO
-DEFAULT &&IKEY = ' ';
-DEFAULT &&ITIME = 'WRUNINDV';
-DEFAULT &&CHECKP = 'N';
-DEFAULT &&SETZIP = 'N';
 
-SET &&AIR_PATH = '&&DATASRV.EVAL' || '\TNT\TTRACKER\DATA\';
-SET &&CAR_PATH = '&&DATASRV.EVAL' || '\TNT\TTRACKER\DATA\';
-SET &&HTL_PATH = '&&DATASRV.EVAL' || '\TNT\TTRACKER\DATA\';
-SET &&LIM_PATH = '&&DATASRV.EVAL' || '\TNT\TTRACKER\DATA\';
-SET &&COM_PATH = '&&DATASRV.EVAL' || '\TNT\TTRACKER\SYSTEM\DATA\';
 
-IF &&CHECKP EQ 'Y' GOTO SKIP_IT;
-* Subroutine returns the TEMPDIR path
-SET &&WEB_PATH=TEMPPATH(50,'A50');
-SET EDAPATH=+&&WEB_PATH;
SET WARNING=OFF
-SET &&CHECKP = 'Y';
-SKIP_IT
-RUN

TABLE FILE ROLLUP_SQL
ON TABLE SET PAGE-NUM OFF
PRINT ROLLUP_CODE COMP AGENCY UDIDUSED
WHERE ROLLUP_CODE EQ '&&ROLLUP.EVAL'
ON TABLE NOTOTAL
ON TABLE SAVE AS HOLDPASS
END
-RUN
-READ HOLDPASS &X.8. &COMP.6. &AGENCY.11. &&UDIDUSED.1.

 
 
-INCLUDE SETCOPYRIGHT
-RUN
 
 
-SET &&AgencyName = ' ';
 
USE CLEAR
-RUN
EX SUUSES
-RUN
 
-SET &HIER = '&&DATASRV.EVAL' || '\TNT\TTRACKER\DATA\AL' || &COMP || '.FOC';
USE ADD
&HIER AS AH_50
END
-RUN
 
CREATE FILE CONTROL
-RUN
 
-TYPE Before first Control MODIFY
MODIFY FILE CONTROL
FIXFORM ROLLUP_CODE/A8
COMPUTE CONTROL_ID/A3  =  'PGM';
COMPUTE USER_ID/A20 = '&&UNAME';
COMPUTE SECURITY_LEVEL/I1 = 9;
COMPUTE WEB_RUN/A1 = 'Y';
COMPUTE INST_KEY/I7 = &&IKEY;
COMPUTE INTIME/A18='&&ITIME';
-*compute TREPORT/A1='';
MATCH CONTROL_ID
 ON MATCH REJECT
 ON NOMATCH INCLUDE
DATA ON HOLDPASS
END
-RUN
 
DEFINE FILE CONTROL
DEPLOY/A1='W';
END
TABLE FILE CONTROL
PRINT ROLLUP_CODE USER_ID DEPLOY
ON TABLE SAVE AS PARMPASS
END
-RUN
 
-DEFAULT &&RTROLL = ' ';
 
-READ PARMPASS &&RTROLL.8 &&UNAME.20 &&DEPLOY.1
 
-TYPE Before first Rollup query
TABLE FILE ROLLUP_SQL
ON TABLE SET PAGE-NUM OFF
PRINT ROLL_NAME AND COMP AND UPD_ENABLE AND QTR_ENABLE AND RKEY_LEN AND
ROLL_CONTACT AND ROLL_CITY AND ROLL_STATE AND ROLL_PHONE ALT_HIERARCHY ROLL_CONTACT_EMAIL
ON TABLE NOTOTAL
WHERE ROLLUP_CODE EQ '&&ROLLUP.EVAL'
ON TABLE SAVE AS TABLPASS
END
-RUN
 
-TYPE Before READ on Tablepass
-READ TABLPASS &&RPTNAM.25 &&COMPNY.6 &&UPDENB.1 &&QTRENAB.1 &&RKYLEN.3,
-, &&ROLLCNCT.25 &&ROLLCTY.15 &&ROLLSTA.2 &&ROLLFON.11 &&ALTHIER.1. &&ROLLEMAIL.100.
-RUN
 
-DEFAULT &&ROLLCTY = ' ';
-DEFAULT &&ROLLCNCT = ' ';
-DEFAULT &&ROLLSTA = ' ';
-DEFAULT &&ROLLFON = ' ';
-DEFAULT &&COMPNY = ' ';
-DEFAULT &&ROLLEMAIL = ' ';
 
 
 
 
-SET &&ROLLNME1 = IF '&&RPTNAM.EVAL' NE 'CCA' OR 'HDR' THEN LCWORD(25, '&&RPTNAM.EVAL', 'A25') ELSE &&RPTNAM;
-SET &&ROLLNMEB = IF '&&RPTNAM.EVAL' CONTAINS 'BINGHAM MCCUTCHEN LLP' THEN 'Bingham McCutchen LLP' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'PGA TOUR SUPERSTORE' THEN 'PGA TOUR Superstore' ELSE &&ROLLNME1;
-SET &&ROLLNMEC = IF '&&RPTNAM.EVAL' CONTAINS 'METLIFE' THEN 'MetLife' ELSE &&ROLLNMEB;
-SET &&ROLLNMED = IF '&&RPTNAM.EVAL' CONTAINS 'T-M' THEN 'T-Mobile USA Inc' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'CFA INSTITUTE' THEN 'CFA Institute' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'JPOWER' THEN 'JPower USA Development' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'PETSMART' THEN 'PetSmart'  ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'CIT Group Inc' THEN 'CIT Group Inc.' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'DDJ CAPITAL' THEN 'DDJ Capital Management' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'PDI INC' THEN 'PDI Inc' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'PORTER MCGUFFIE' THEN 'Porter McGuffie Inc' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'retailone' THEN 'retailone' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'JACK & JACK' THEN 'Jack & Jack LLC' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'NW EVALUATION ASSOC-NWEA' THEN 'NW Evalutation Assoc-NWEA' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'SMT' THEN 'SMT' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'APOLLOMD' THEN 'ApolloMD' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'DATAGRAVITY' THEN 'DataGravity' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'UNIFIRST CORPORATION' THEN 'UniFirst Corporation' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'TPI COMPOSITES INC' THEN 'TPI Composites Inc' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'SLOANLED' THEN 'SloanLED' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'CoreCivic' THEN 'CoreCivic' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'RDG PLANNING' THEN 'RDg Planning and Design' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'HB FULLER COMPANY' THEN 'HB Fuller Company' ELSE 
-                 IF '&&RPTNAM.EVAL' CONTAINS 'CDIC INC' THEN 'CDIC Inc' ELSE
-                 IF '&&RPTNAM.EVAL' CONTAINS 'CDK GLOBAL' THEN 'CDK Global' ELSE &&ROLLNMEC;
 
 
-SET &&RSTATEB = ' ';
 
-SET &&ROLLNME = TRUNCATE(&&ROLLNMED);
-SET &&ROLLCTY1 = LCWORD(15, '&&ROLLCTY.EVAL', 'A15');
-SET &&ROLLCNCT1 = LCWORD(25, '&&ROLLCNCT.EVAL', 'A25');
-SET &&ROLLCNCTA = IF &&RPTNAM CONTAINS 'ALLSTATE' THEN &&ROLLCNCT ELSE &&ROLLCNCT1;

-SET &&ROLLCNCT = TRUNCATE(&&ROLLCNCTA);


 
-SET &&RSTATE = IF '&&ROLLUP.EVAL' EQ 'BOOZ-R' THEN &&RSTATEB ELSE &&ROLLSTA;
 
-* -SET &&ROLLCS1 = TRUNCATE(&&ROLLCTY1) || EDIT(&&ROLLSTA,', 99');
-SET &&ROLLCS1 = TRUNCATE(&&ROLLCTY1) || EDIT(&&RSTATE,', 99');
 
-SET &&ROLLPHN = EDIT(&&ROLLFON,'9-999-999-9999');
-SET &&ROLLEML = TRUNCATE(&&ROLLEMAIL);
 
-SET &&ROLLCS = IF &&ROLLCS1 EQ ',' THEN ' ' ELSE &&ROLLCS1;
-SET &&ROLLCS = IF &&RSTATE EQ ' ' THEN &&ROLLCTY1 ELSE &&ROLLCS1;
-SET &&ROLLPHN = IF &&ROLLPHN EQ ' -   -   -    ' THEN ' ' ELSE &&ROLLPHN;
 
-SET &&AIR_DB = 'A_' || &&COMPNY || '.FOC';
-SET &&CAR_DB = 'C_' || &&COMPNY || '.FOC';
-SET &&HTL_DB = 'H_' || &&COMPNY || '.FOC';
-SET &&SEG_DB = 'S_' || &&COMPNY || '.FOC';
-SET &&MRK_DB = 'M_' || &&COMPNY || '.FOC';
-SET &&DST_DB = 'D_' || &&COMPNY || '.FOC';
-SET &&TKT_DB = 'T_' || &&COMPNY || '.FOC';
-SET &&LIM_DB = 'L_' || &&COMPNY || '.FOC';
-SET &&AH_DB = 'AL' || &&COMPNY || '.FOC';
-SET &&CH_DB = 'AL' || &&COMPNY || '.FOC';
-SET &&HH_DB = 'AL' || &&COMPNY || '.FOC';
-SET &&HIER = 'AL' || &&COMPNY || '.FOC';
-SET &&XHIER = 'AL' || &&COMPNY || '.FOC';
-SET &&USE_HIER = &&AIR_PATH || &&HIER;
 
-SET &&UAUDID = 'UA' || &&COMPNY || '.FOC';
-SET &&UCUDID = 'UC' || &&COMPNY || '.FOC';
-SET &&UHUDID = 'UH' || &&COMPNY || '.FOC';
 
-XEND
-SET &&WEBPATH = '&&WEBSRV.EVAL' ||'\TTWEB\ ' || &&ROLLUP || '\ '||&&UNAME.EVAL|| '\';
-DOS MKDIR &&WEBPATH
