-*****************THIS HEADER REPRESENTS THE 80 CHARACTER MAXIUM FOR PROGRAMS**
-* Removed Conagra Special from here so that they could have the standard
-* report as well as their specialized version JK 10/16/03
-* Added Current Total Average Ticket Price per Patti JK 2/24/04
-*  02/02/2015  REJ  S-05681 Changes to the no data report to prepare for the Available
-*                           Report changes.  Rollup Code is being removed from BRPTINST in
-*                           ER5, so I'm removing the reference to the ROLLUP_CODE in that report.
-*  02/04/2016  REJ  S-13237 Available Report changes so dates appear correct.
-* 02/24/2017 - DLV - S-22486 CHANGED ettek Review to Post-trip Reporting
-* 07/06/2017 - RSB - S-36531 Reports that do not use a view to be updated with standard footer (part 2)
-* 08/28/2017 - RSB - S-39056 Footer changes to be backed out of story S-36531
-*
-SET &&PAHDR  = IF '&&OUTFMT.EVAL' EQ 'PDF' OR 'PPT' OR 'COM' THEN 'HEADAIR' ELSE 'HDREXLS'; 
-SET &&PASTYD = IF '&&OUTFMT.EVAL' NE 'PDF' OR 'PPT' OR 'COM' THEN 'DTEXL'   ELSE &&DTSTY;
-*  
-INCLUDE SETECHO
SET ASNAMES=ON
  
-SET &&RPTSUF = 'BENCHMARK';
-IF &&FROMAVRP NE 'Y' GOTO :HDA1;
-SET &FMM=EDIT(&&FROMDT,'$$$$$$99');
-SET &FMD=EDIT(&&FROMDT,'$$$$$$$$$99');
-SET &FMY=EDIT(&&FROMDT,'$9999');
-SET &TOM=EDIT(&&TODT,'$$$$$$99');
-SET &TOD=EDIT(&&TODT,'$$$$$$$$$99');
-SET &TOY=EDIT(&&TODT,'$9999');
 
-GOTO :HDA1_CONT;
-:HDA1
-SET &FMM=EDIT(&&FROMDT,'$$$$$99');
-SET &FMD=EDIT(&&FROMDT,'$$$$$$$$99');
-SET &FMY=EDIT(&&FROMDT,'9999');
-SET &TOM=EDIT(&&TODT,'$$$$$99');
-SET &TOD=EDIT(&&TODT,'$$$$$$$$99');
-SET &TOY=EDIT(&&TODT,'9999');
-:HDA1_CONT
-SET &&SP = '|';
-SET &&SP1A = IF &&ROLLNME EQ ' ' THEN ' ' ELSE &&SP;
-SET &&SP1 = IF &&ROLLCS EQ ' ' THEN ' ' ELSE &&SP1A;
-SET &&SP3 = IF &&ROLLCNCT EQ ' ' THEN ' ' ELSE &&SP;
-SET &&SP4 = IF &&ROLLPHN EQ ' ' THEN ' ' ELSE &&SP;
-SET &&RCNCT = &&ROLLCNCT.LENGTH;
-SET &&CSL = &&ROLLCS.LENGTH;
-SET &&CSLPA = IF &&RCNCT.EVAL GE 10 OR &&CSL.EVAL GE 10 THEN 60 ELSE 68;
-SET &&CSLP = IF '&&ROLLUP.EVAL' EQ 'BOOZ-R' THEN 78 ELSE &&CSLPA;
-SET &&ROLLCS11 = TRUNCATE(&&ROLLCS);
-SET &&RCNCT1 = TRUNCATE(&&ROLLCNCT);
-SET &&BLANK = ' ';
 
JOIN TRANTWO.TRAN_MY IN TRANTWO TO CARTHREE.TRAN_MY IN CARTHREE AS J1
JOIN TRANTWO.TRAN_MY IN TRANTWO TO HTLHLD3.TRAN_MY IN HTLHLD3 AS J2
END
-RUN
 
 
DEFINE FILE TRANTWO
NOWTOD/A8 WITH CAVOL = HHMMSS (NOWTOD);
BLANK/A1 = ' ';
END
-RUN
 
-IF &&SETF EQ 'ABBNMMN' THEN GOTO STD;
 
 
-IF &&ROLLUP EQ 'CONG-R' THEN GOTO CONG;
-IF &&ROLLUP EQ 'METX-R' THEN GOTO METX ELSE GOTO STD;
-RUN
 
 
-CONG
-INCLUDE FDEFRPTS
-RUN
TABLE FILE TRANTWO
SUM CAVOL/D12CS AS 'OG Total,Volume'
-* CAVAR1 AS 'OG Volume,Variance %'
CVSAV/D12CS AS 'OG,Contract Savings'
CNTKT AS 'OG Net,Tickets'
CLSAV/D12CS AS 'TOTAL OG $,Lost Savings'
CLS100P AS 'OG %,of Lost Savings,Greater than $100,to Total OG Spend'
CNVSA/D12CS AS 'Total $, Amount,On,Nonvisa'
CTAVGT/D12CS AS 'OG Total, Average, Ticket, Price'
CAVGT/D12CS AS 'OG Average,Domestic,Ticket,Price'
-*AAVGV1 AS 'OG Domestic,Average,Ticket Price,Variance %'
CADVP3/P12CS AS 'OG % of,Net Tickets Purchased,0-6 Days'
CADVP4/P12CS AS 'OG % of,Net Tickets Purchased,7-13 Days'
CONLP1/P12CS AS 'OG %, Domestic of Online Bookings'
CNRP/P12CS AS 'OG %,of NonRefundable Tickets'
CRENTAL AS 'OG Total,Car,Rental,Days'
PCTNOMID/P12CS AS 'OG %,of Cars Larger,Than Mid-size'
AVGRATE/D12CS AS 'OG Average,Hotel,Cost Per,Night'
BY TRAN_MY AS ' '
-GOTO HEAD
 
-METX
-INCLUDE FDEFRPTS
-RUN
TABLE FILE TRANTWO
SUM CAVOL/D12CS AS 'Total,Volume' BLANK AS ''
PCT.CAVOL AS '% of,Total,Volume' BLANK AS ''
-* CAVAR AS 'Volume,Variance' BLANK AS ''
CNTKT AS 'Net,Tickets' BLANK AS ''
CLSAV/D12CS AS 'TOTAL $,Lost Savings' BLANK AS ''
CTLS AS '% of,Total Lost Savings to,Total Air Volume'  BLANK AS ''
CLS2 AS '$ of,Lost Savings Due to,Time Specified' BLANK AS ''
CLS1 AS '$ of,Lost Savings Due to,Declined Connection' BLANK AS ''
CNFSV AS '% of,Savings due to,Airline Contracts' BLANK AS ''
CAVGT AS 'Average,Domestic,Ticket,Price' BLANK AS ''
-* AAVGV AS 'Average,Domestic,Ticket Price,Variance' BLANK AS ''
CADVP1 AS '%,of Net Tickets Purchased,0-6 Days' BLANK AS ''
CONLP AS '%,of Online Bookings' BLANK AS ''
CNRP AS '%,of NonRefundable Tickets' BLANK AS ''
PCTNOMID AS '%,of Cars Larger,Than Mid-size' BLANK AS ''
AVGRATE AS 'Average,Hotel,Cost Per,Night' BLANK AS ''
BY LEVEL_DESC AS 'LOB'
-GOTO HEAD
 
-STD
-INCLUDE FDEFRPTS
-RUN
TABLE FILE TRANTWO
SUM CAVOL/D12CS AS 'Total,Volume'
PCT.CAVOL AS '% of,Total,Volume'
-* CAVAR1 AS 'Volume,Variance %'
CNTKT AS 'Net,Tickets'
CDLSAV/D12CS AS 'Domestic Air Lost Savings'
CTLSV  AS '% of,Domestic Lost Savings, to Domestic Air Volume'
CLSAV/D12CS AS 'TOTAL $,Lost Savings'
CTLS AS '% of,Total Lost Savings to,Total Air Volume'
CCLS2 AS '% of,Lost Savings Due to,Time Specified'
CCLS1 AS '% of,Lost Savings Due to,Declined Connection'
CCLS3 AS '% of,Lost Savings Due to,Airline/Flight Specified'
CCLS4 AS '% of,Lost Savings Due to,Refused Discount due to Penalty/Restrict'
CCLS5 AS '% of,Lost Savings Due to,Section/Fare Type Specified'
CDTLSV AS '% of Domestic Lost Savings, to Total Lost Savings'
CVSAV/D12CS AS 'Contract Savings'
CDATKT AS 'Domestic,Average,Ticket,Price'
CTAVGT AS 'Average,Ticket,Price'
-* AAVGV1 AS 'Average,Ticket Price,Variance %'
CADVP1 AS '% of,Net Tickets Purchased,0-6 Days'
CADVP2 AS '% of,Net Tickets Purchased,7-13 Days'
CADVP5 AS '% of,Net Tickets Purchased,14-20 Days'
CADVP6 AS '% of,Net Tickets Purchased,21+ Days'
CDONLP AS '%,of Domestic,Online Bookings'
CNRP AS '%,of NonRefundable Tickets'
CPMILE AS 'Cost Per Mile'
PCTNOMID AS '%,of Cars Larger,Than Mid-size'
AVGMID AS 'Average Midsize Car, Rate'
AVGRATE AS 'Average,Hotel,Cost Per,Night'
BY TRAN_MY AS ' '
 
 
-GOTO HEAD
-HEAD
HEADING
-INCLUDE &&PAHDR
"&&SUBHEAD"
-IF &&PAHDR EQ 'HDREXLS' GOTO NOSPC;
"</2"
-NOSPC;
-*
-INCLUDE FOOTERDT
-*
ON TABLE SET PAGE-NUM OFF
ON TABLE NOTOTAL
ON TABLE PAGE-BREAK AND SUBFOOT
-INCLUDE SBFOOT
 
ON TABLE SET STYLE *
-INCLUDE &&PASTYD
ENDSTYLE
-* 
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
-IF &RECORDS EQ 0 THEN GOTO NORECORDS ELSE GOTO XXIT;
-* -GOTO XXIT;
 
 
 
 
-NORECORDS
-SET &&RPTSUF = 'MSG';
-INCLUDE FDEFRPTS
-RUN
JOIN SET_KEY IN BRPTINST TO SET_KEY IN BRPT_SET AS J1
DEFINE FILE BRPTINST
EMPTY/A35 = 'NO RECORDS FOUND FOR THIS SELECTION';
NOWTOD/A8 WITH INST_KEY = HHMMSS (NOWTOD);
END
TABLE FILE BRPTINST
-INCLUDE HEADERDD
PRINT EMPTY AS 'REPORT,MESSAGE'
BY ROLLUP_CODE AS 'ROLLUP,CODE'
BY RPT_NAME AS 'REPORT,NAME'
BY SELECT_LEV AS 'BREAK,LEVEL'
IF INST_KEY EQ &&IKEY
IF RECORDLIMIT EQ 1
-INCLUDE FOOTERDT
ON TABLE SUBFOOT
-INCLUDE SBFOOT
ON TABLE SET PAGE-NUM OFF
ON TABLE SET STYLE *
-INCLUDE &&DTSTY
ENDSTYLE
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN
 
-XXIT;
