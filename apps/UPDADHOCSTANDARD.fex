-* 07/27/15 - DEB - S-10299 COMMENTED OUT SET &ECHO=ALL
-* UPDADHOCSTANDARD.FEX
-* UPDATE STANDARDREPORTFIELDS
-*
-*-SET &ECHO=ALL;
-INCLUDE SETECHO
-SET &FPATH = 'D:\TNT\FOCEXEC\';
APP MAP MYTEMP &FPATH
APP PREPENDPATH MYTEMP
-RUN

-GOTO CHKRESULT;

-SET &FILENAME = &FPATH || 'AIR_VIEW.csv'

FILEDEF AVIEW0 DISK &FILENAME
TABLE FILE AVIEW0
PRINT *
ON TABLE HOLD
END
-RUN
MODIFY FILE STANDARDREPORTFIELDS
FIXFORM FROM HOLD
DATA ON HOLD
END
-RUN

-SET &FILENAME = &FPATH || 'CAR_VIEW.csv';
FILEDEF AVIEW0 DISK &FILENAME
TABLE FILE AVIEW0
PRINT *
ON TABLE HOLD
END
-RUN
MODIFY FILE STANDARDREPORTFIELDS
FIXFORM FROM HOLD
DATA ON HOLD
END
-RUN

-HOTEL
-SET &FILENAME = &FPATH || 'HTL_VIEW.csv';
FILEDEF AVIEW0 DISK &FILENAME
TABLE FILE AVIEW0
PRINT *
ON TABLE HOLD
END
-RUN

MODIFY FILE STANDARDREPORTFIELDS
FIXFORM FROM HOLD
DATA ON HOLD
END
-RUN

-UPDINST

JOIN CLEAR *
JOIN INST_KEY IN ADHOCREPORTS TO INST_KEY IN RPT_INST AS J1
END
SET ASNAME = ON
DEFINE FILE ADHOCREPORTS
  GPARM/A8 = 'NONE';
  UPARM/A8 = IF RPT_GROUP EQ 'AIR' THEN 'AVIEW0' ELSE IF RPT_GROUP EQ 'CAR' THEN 'CVIEW0' ELSE 'HVIEW0';
END
TABLE FILE ADHOCREPORTS
PRINT ROLLUP_CODE RPT_GROUP UPARM AS 'USE_PARM' GPARM AS 'GLOBAL_PARM' RPT_STREAM
BY INST_KEY
ON TABLE HOLD
END
-RUN
MODIFY FILE RPT_INST
FIXFORM FROM HOLD
MATCH INST_KEY 
  ON MATCH UPDATE USE_PARM GLOBAL_PARM
DATA ON HOLD
END
-RUN
-QUIT

-CHKRESULT
JOIN CLEAR *
JOIN INST_KEY IN ADHOCREPORTS TO INST_KEY IN RPT_INST AS J1
END
TABLE FILE ADHOCREPORTS
PRINT ROLLUP_CODE RPT_GROUP QUERY_TYPE USE_PARM GLOBAL_PARM RPT_STREAM
BY INST_KEY
END
-RUN







