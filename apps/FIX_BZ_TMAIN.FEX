SET ASNAMES = ON
-INCLUDE SETECHO

FILEDEF TEST1 DISK D:\AS400\TEST1.TXT
FILEDEF TEST2 DISK D:\AS400\TEST2.TXT
FILEDEF TEST3 DISK D:\AS400\TEST3.TXT

TABLE FILE TEST1
PRINT NEW1   NEW2 NEW3
BY AIR_KEY
ON TABLE HOLD AS HOLD1
END
-RUN

DEFINE FILE HOLD1
ADIR_ALL/A208 = NEW1;
ANON_ALL/A208 = NEW2;
ADIR_STP/A176 = NEW3;
END
TABLE FILE HOLD1
PRINT ADIR_ALL ANON_ALL ADIR_STP
BY AIR_KEY
ON TABLE HOLD AS FIX1
END
-RUN




TABLE FILE TEST2
PRINT NEW4 NEW5 NEW6
BY AIR_KEY
ON TABLE HOLD AS HOLD2
END
-RUN

DEFINE FILE HOLD2
ANON_STP/A176 = NEW4;
CDIR_ALL/A208 = NEW5;
CNON_ALL/A208= NEW6;
END
TABLE FILE HOLD2
PRINT  ANON_STP CDIR_ALL CNON_ALL
BY AIR_KEY
ON TABLE HOLD AS FIX2
END
-RUN

 
 


TABLE FILE TEST3
PRINT NEW7 NEW8
BY AIR_KEY
ON TABLE HOLD AS HOLD4
END
-RUN


DEFINE FILE HOLD4
CDIR_STP/A176 = NEW7;
CNON_STP/A176 = NEW8;
END
TABLE FILE HOLD4
PRINT CDIR_STP CNON_STP
BY AIR_KEY
ON TABLE HOLD AS FIX3
END
-RUN



MODIFY FILE TZBOOZ
FIXFORM FROM FIX1
MATCH AIR_KEY
ON MATCH UPDATE ADIR_ALL  
ON MATCH UPDATE ANON_ALL
ON MATCH UPDATE ADIR_STP
ON NOMATCH REJECT
DATA ON FIX1
END
-RUN

MODIFY FILE TZBOOZ
FIXFORM FROM FIX2
MATCH AIR_KEY
ON MATCH UPDATE ANON_STP  
ON MATCH UPDATE CDIR_ALL
ON MATCH UPDATE CNON_ALL
ON NOMATCH REJECT
DATA ON FIX2
END
-RUN


MODIFY FILE TZBOOZ
FIXFORM FROM FIX3
MATCH AIR_KEY
ON MATCH UPDATE CDIR_STP
ON MATCH UPDATE CNON_STP
ON NOMATCH REJECT
DATA ON FIX3
END
-RUN
