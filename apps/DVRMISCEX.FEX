-************************************************************************************
-
-************************************************************************************
-INCLUDE SETECHO 

SET ASNAMES = ON
-SET HOLDATTR = ON;
-RUN


TABLE FILE PFHOLDM
PRINT TRN_TYPE TRN_DATE FEE_SRC FEE_AMT PAY_METHOD CREDIT_CARD FST_DPT_DATE CNT
BY MISC_KEY
WHERE MISC_KEY NE ' '
ON TABLE HOLD AS MISCFEE
END
-RUN
 


-IF &LINES EQ 0 THEN GOTO MiscXXIT;
 
DEFINE FILE MISCFEE
PASSNGR_NAME/A33 = EDIT(MISC_KEY, '$$$$$$$999999999999999999999999999999999');
INVOICE_NUM/A7= EDIT(MISC_KEY, '9999999');
TEST/A35 = EDIT(MISC_KEY, '$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$99999999999999999999999999999999999');
XL01/I2 = POSIT(MISC_KEY, 75, '4', 1, 'I2');
TEST2/I2= POSIT(TEST, 35, '-', 1, 'I2'); 
DASH3/A15 = GETTOK(TEST, 35, 3, '-', 15, DASH3);
DASH2/A15 = GETTOK(TEST, 35, 2, '-', 15, DASH2);
DASH4/A60 = '                                                            ';

LEVEL1/A15 = EDIT(TEST, '$$$$$$999999999999999');
PNR_LOCATOR/A6 = '      ';
TKT_NUM/A30 = '                              ';
TSORT/A11 = '           ';
TYPE/A3 = 'SAL';
XFST_DT/MDYY         = FST_DPT_DATE;
CITY1/A25 = 'MISC SVC FEE             '; 
DATE2/MDYY = FST_DPT_DATE;
DATA_V1/A9 = '*********';
DV_NUM2/A6 = EDIT(CREDIT_CARD, '$$$$$$$$$$$$999999');
DV_NUM/A15 = IF DV_NUM2 EQ ' ' THEN ' ' ELSE DATA_V || DV_NUM2;
AMOUNT/D12.2C  = FEE_AMT;
TTL_COUNT/D12C  = CNT;
ACCT/A8 = '        ';
LEVEL_DESC/A60 = '                                                            ';
GEO_ZONE/A3 = '   ';
TRIP_PURPOSE/A2 = '  ';
NAME/A3 = '   ';
STATUS/A1 = 'O';
FLAG/A1 = 'M';
SEG/A2 = '  ';
XTRAN_DT/MDYY = TRN_DATE;
END
TABLE FILE MISCFEE
PRINT PASSNGR_NAME
   PNR_LOCATOR
   XTRAN_DT AS 'TRAN_DATE'
 
   TKT_NUM
   TSORT
   TYPE
   SEG
   NAME
   XFST_DT AS 'DATE'
   DATE2
   CITY1
   DV_NUM
   AMOUNT
   TTL_COUNT
   ACCT
   INVOICE_NUM
   STATUS
   LEVEL_DESC
   LEVEL1
   DASH2 AS 'LEVEL2'
   DASH3 AS 'LEVEL3'
   DASH4 AS 'LEVEL4'
   DASH4 AS 'LEVEL5'
   GEO_ZONE
   TRIP_PURPOSE
BY FLAG
BY PASSNGR_NAME NOPRINT
ON TABLE HOLD AS HOLDM FORMAT FOCUS
END
-RUN
 

-MiscXXIT




