-*****************THIS HEADER REPRESENTS THE 80 CHARACTER MAXIUM FOR PROGRAMS**

-TYPE "DATEVER"
-* -DEFAULT &&RPTSUF = 'SMY';

SET ASNAMES=ON

DEFINE FILE GLOBAL
FLAG/A1 = 'A';
END
-RUN
TABLE FILE GLOBAL
PRINT DATE COUNTRYCODE
BY FLAG
WHERE COUNTRYCODE EQ '&&CURRENCY'
WHERE RECORDLIMIT EQ 1
ON TABLE HOLD AS GBHOLD
END
-RUN

DEFINE FILE SR_50
FLAG/A1 = 'A';
END
-RUN

TABLE FILE SR_50
PRINT TRN_DATE AS 'DATE1'
BY FLAG
WHERE TRN_DATE EQ &&FROMDT.EVAL
WHERE RECORDLIMIT EQ 1
ON TABLE HOLD AS DATEHOLD
END
-RUN

MATCH FILE DATEHOLD
PRINT DATE1
BY FLAG
ON TABLE HOLD
RUN
FILE GBHOLD
SUM DATE COUNTRYCODE
BY FLAG
AFTER MATCH HOLD AS DATE1 OLD-OR-NEW
END
-RUN

TABLE FILE DATE1
SUM DATE COUNTRYCODE
BY DATE1
WHERE DATE1 GE DATE
-* ON TABLE HOLD AS FDATE
END
-RUN
-QUIT


-IF &RECORDS GT 0 THEN GOTO XXIT;
-RUN

-DATE
-SET &&RPTSUF = 'MSG';
-INCLUDE FDEFRPTS
DEFINE FILE DATE1
EMPTY1/A26  = 'HAS DATA AVAILABLE BACK TO';
EMPTY2/A38 = 'THUS THIS REQUEST CANNOT BE PROCESSED';
NOWTOD/A8 WITH DATE1 = HHMMSS (NOWTOD);
END
TABLE FILE DATE1
PRINT DATE AS 'DATE'
      EMPTY2 AS 'REPORT,MESSAGE'
BY COUNTRYCODE AS 'CURRENCY'
BY EMPTY1 AS 'REPORT,MESSAGE'
HEADING
"</2"
-* ON TABLE SUBFOOT
-* -INCLUDE SBFOOT
ON TABLE SET PAGE-NUM OFF
ON TABLE SET STYLE *
-INCLUDE &&DTSTY
ENDSTYLE
END
-RUN
-QUIT
&&OUTLINE1
&&OUTPUTDEST
&&OUTLINE2
END
-RUN


-XXIT




      
